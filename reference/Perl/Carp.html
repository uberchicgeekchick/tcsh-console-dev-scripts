<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>Carp - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Language" content="en-gb" />
  <link href="css.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen" />
</head>

<script language="JavaScript" type="text/javascript" src="label.js"></script>

<script language="JavaScript">
  pageDepth = 0;
  setPath();
</script>

<body onLoad="showToolbars();loadLabels()">

<div id="pageHeader">
  <div id="pageHeaderLogo">
    <img src="onion.gif">
  </div>
  <div id="pageHeaderText">
    <a href="http://perldoc.perl.org">perldoc.perl.org</a>
  </div>
</div>

<div id="pageBody">
  <div id="left">
    <div id="leftContent">
      <div id="leftClose">
        <a href="#" onClick="closeLeft()" title="Hide navigation" onmouseover="leftCloseIcon.src='close_purple.gif';" onmouseout="leftCloseIcon.src='close_blue.gif';"><img src="close_blue.gif" name="leftCloseIcon" id="leftCloseIcon" border=0></a>
      </div>
      <h1>Manual:</h1>
      <ul>
        <li><a href="index-overview.html">Overview</a></li>
        <li><a href="index-tutorials.html">Tutorials</a></li>
        <li><a href="index-faq.html">FAQs</a></li>
        <li><a href="index-history.html">History / Changes</a></li>
        <li><a href="index-licence.html">Licence</a></li>
      </ul>
      <h2>Reference:</h2>
      <ul>
        <li><a href="index-language.html">Language</a></li>
        <li><a href="index-functions.html">Functions</a></li>
        <li><a href="perlop.html">Operators</a></li>
        <li><a href="perlvar.html">Special variables</a></li>
        <li><a href="index-pragmas.html">Pragmas</a></li>
        <li><a href="index-modules-A.html">Core modules</a></li>
        <li><a href="index-utilities.html">Utilities</a></li>
        <li><a href="index-internals.html">Internals</a></li>
        <li><a href="index-platforms.html">Platform specific</a></li>
      </ul>
      <h2>Links:</h2>
      <ul>
        <li><a href="http://search.cpan.org">CPAN</a></li>
        <li><a href="http://www.perl.com">Perl.com</a></li>
        <li><a href="http://www.perl.org">Perl.org</a></li>
        <li><a href="http://www.pm.org">Perl Mongers</a></li>
        <li><a href="http://www.perlmonks.org">Perl Monks</a></li>
        <li><a href="http://planet.perl.org">Planet Perl</a></li>
        <li><a href="http://use.perl.org">Use Perl</a></li>
      </ul>
      <h2>Contact:</h2>
      <ul>
        <li>Site maintained by<br><a href="http://perl.jonallen.info">Jon Allen</a>
            (<a href="http://perl.jonallen.info">JJ</a>)</li>
        <li class="spaced">Last updated on<br>23 April 2006</li>
	<li class="spaced">See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for
	more details</li>
      </ul>
    </div>
  </div>

  <div id="center">  
    <div id="centerContent">
      <div id="contentHeader">
        <div id="contentHeaderLeft"><a href="#" onClick="showLeft()">Show navigation</a></div>
        <div id="contentHeaderCentre">-- Perl 5.8.8 documentation --</div>
        <div id="contentHeaderRight"><a href="#" onClick="showRight()">Show toolbar</a></div>
      </div>
      <div id="breadCrumbs"><a href="index.html">Home</a> &gt; <a href="index-modules-A.html">Core modules</a> &gt; <a href="index-modules-C.html">C</a> &gt; Carp</div>
      <script language="JavaScript">fromSearch();</script>
      <div id="contentBody"><div class="title_container"><div class="page_title">Carp</div><div class="pdf_link"><a href="Carp.pdf">View as PDF</a></div><div class="pdf_img_link"><a href="Carp.pdf"><img src="pdficon.gif" border=0></a></div></div><ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><ul><li><a href="#Forcing-a-Stack-Trace">Forcing a Stack Trace</a></ul><li><a href="#GLOBAL-VARIABLES">GLOBAL VARIABLES</a><ul><li><a href="#%24Carp%3a%3aCarpLevel">$Carp::CarpLevel</a><li><a href="#%24Carp%3a%3aMaxEvalLen">$Carp::MaxEvalLen</a><li><a href="#%24Carp%3a%3aMaxArgLen">$Carp::MaxArgLen</a><li><a href="#%24Carp%3a%3aMaxArgNums">$Carp::MaxArgNums</a><li><a href="#%24Carp%3a%3aVerbose">$Carp::Verbose</a></ul><li><a href="#BUGS">BUGS</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>carp    - warn of errors (from perspective of caller)</p>
<p>cluck   - warn of errors with stack backtrace
          (not exported by default)</p>
<p>croak   - die of errors (from perspective of caller)</p>
<p>confess - die of errors with stack backtrace</p>
<p>shortmess - return the message that carp and croak produce</p>
<p>longmess - return the message that cluck and confess produce</p>
<a name="SYNOPSIS"></a><h1>SYNOPSIS</h1>
<pre class="verbatim">    <a class="l_k" href="functions/use.html">use</a> <a class="l_w" href="Carp.html">Carp</a><span class="sc">;</span>
    croak <span class="q">&quot;We&#39;re outta here!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="functions/use.html">use</a> <a class="l_w" href="Carp.html">Carp</a> <span class="q">qw(cluck)</span><span class="sc">;</span>
    cluck <span class="q">&quot;This is how we got here!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="functions/print.html">print</a> <span class="i">FH</span> <span class="i">Carp::shortmess</span><span class="s">(</span><span class="q">&quot;This will have caller&#39;s details added&quot;</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="functions/print.html">print</a> <span class="i">FH</span> <span class="i">Carp::longmess</span><span class="s">(</span><span class="q">&quot;This will have stack backtrace added&quot;</span><span class="s">)</span><span class="sc">;</span></pre>
<a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>The Carp routines are useful in your own modules because
they act like die() or warn(), but with a message which is more
likely to be useful to a user of your module.  In the case of
cluck, confess, and longmess that context is a summary of every
call in the call-stack.  For a shorter message you can use carp,
croak or shortmess which report the error as being from where
your module was called.  There is no guarantee that that is where
the error was, but it is a good educated guess.</p>
<p>You can also alter the way the output and logic of <code class="inline"><a class="l_w" href="Carp.html">Carp</a></code> works, by
changing some global variables in the <code class="inline"><a class="l_w" href="Carp.html">Carp</a></code> namespace. See the
section on <code class="inline">GLOBAL VARIABLES</code>
 below.</p>
<p>Here is a more complete description of how shortmess works.  What
it does is search the call-stack for a function call stack where
it hasn't been told that there shouldn't be an error.  If every
call is marked safe, it then gives up and gives a full stack
backtrace instead.  In other words it presumes that the first likely
looking potential suspect is guilty.  Its rules for telling whether
a call shouldn't generate errors work as follows:</p>
<ol>
<li>
<p>Any call from a package to itself is safe.</p>
</li>
<li>
<p>Packages claim that there won't be errors on calls to or from
packages explicitly marked as safe by inclusion in @CARP_NOT, or
(if that array is empty) @ISA.  The ability to override what
@ISA says is new in 5.8.</p>
</li>
<li>
<p>The trust in item 2 is transitive.  If A trusts B, and B
trusts C, then A trusts C.  So if you do not override @ISA
with @CARP_NOT, then this trust relationship is identical to,
"inherits from".</p>
</li>
<li>
<p>Any call from an internal Perl module is safe.  (Nothing keeps
user modules from marking themselves as internal to Perl, but
this practice is discouraged.)</p>
</li>
<li>
<p>Any call to Carp is safe.  (This rule is what keeps it from
reporting the error where you call carp/croak/shortmess.)</p>
</li>
</ol>
<a name="Forcing-a-Stack-Trace"></a><h2>Forcing a Stack Trace</h2>
<p>As a debugging aid, you can force Carp to treat a croak as a confess
and a carp as a cluck across <i>all</i> modules. In other words, force a
detailed stack trace to be given.  This can be very helpful when trying
to understand why, or from where, a warning or error is being generated.</p>
<p>This feature is enabled by 'importing' the non-existent symbol
'verbose'. You would typically enable it by saying</p>
<pre class="verbatim">    perl -MCarp=verbose script.pl</pre>
<p>or by including the string <code class="inline">MCarp=verbose</code>
 in the PERL5OPT
environment variable.</p>
<p>Alternately, you can set the global variable <code class="inline"><span class="i">$Carp::Verbose</span></code>
 to true.
See the <code class="inline">GLOBAL VARIABLES</code>
 section below.</p>
<a name="GLOBAL-VARIABLES"></a><h1>GLOBAL VARIABLES</h1>
<a name="%24Carp%3a%3aCarpLevel"></a><h2>$Carp::CarpLevel</h2>
<p>This variable determines how many call frames are to be skipped when
reporting where an error occurred on a call to one of <code class="inline"><a class="l_w" href="Carp.html">Carp</a></code>'s
functions. For example:</p>
<pre class="verbatim">    $Carp::CarpLevel = 1;
    sub bar     { .... or _error('Wrong input') }
    sub _error  { Carp::carp(@_) }</pre><p>This would make Carp report the error as coming from <code class="inline">bar</code>
's caller,
rather than from <code class="inline">_error</code>
's caller, as it normally would.</p>
<p>Defaults to <code class="inline"><span class="n">0</span></code>
.</p>
<a name="%24Carp%3a%3aMaxEvalLen"></a><h2>$Carp::MaxEvalLen</h2>
<p>This variable determines how many characters of a string-eval are to
be shown in the output. Use a value of <code class="inline"><span class="n">0</span></code>
 to show all text.</p>
<p>Defaults to <code class="inline"><span class="n">0</span></code>
.</p>
<a name="%24Carp%3a%3aMaxArgLen"></a><h2>$Carp::MaxArgLen</h2>
<p>This variable determines how many characters of each argument to a
function to print. Use a value of <code class="inline"><span class="n">0</span></code>
 to show the full length of the
argument.</p>
<p>Defaults to <code class="inline"><span class="n">64</span></code>
.</p>
<a name="%24Carp%3a%3aMaxArgNums"></a><h2>$Carp::MaxArgNums</h2>
<p>This variable determines how many arguments to each function to show.
Use a value of <code class="inline"><span class="n">0</span></code>
 to show all arguments to a function call.</p>
<p>Defaults to <code class="inline"><span class="n">8</span></code>
.</p>
<a name="%24Carp%3a%3aVerbose"></a><h2>$Carp::Verbose</h2>
<p>This variable makes <code class="inline"><a class="l_w" href="Carp.html">Carp</a></code> use the <code class="inline">longmess</code>
 function at all times.
This effectively means that all calls to <code class="inline">carp</code>
 become <code class="inline">cluck</code>
 and
all calls to <code class="inline">croak</code>
 become <code class="inline">confess</code>
.</p>
<p>Note, this is analogous to using <code class="inline"><a class="l_k" href="functions/use.html">use</a> <a class="l_w" href="Carp.html">Carp</a> <span class="q">&#39;verbose&#39;</span></code>
.</p>
<p>Defaults to <code class="inline"><span class="n">0</span></code>
.</p>
<a name="BUGS"></a><h1>BUGS</h1>
<p>The Carp routines don't handle exception objects currently.
If called with a first argument that is a reference, they simply
call die() or warn(), as appropriate.</p>
</div>
      <div id="contentFooter"><a href="http://www.perl.org"><img src="perlpowered.png" border=0></a></div>
    </div>
  </div>

  <div id="right">
    <div id="rightContent">
      <div id="leftClose">
        <a href="#" onClick="closeRight()" title="Hide toolbar" onmouseover="rightCloseIcon.src='close_purple.gif';" onmouseout="rightCloseIcon.src='close_blue.gif';"><img src="close_blue.gif" name="rightCloseIcon" id="rightCloseIcon" border=0></a>
      </div>
      <h1>Search:</h1>
      <p>
        <form action="search.html" name="perldoc_search">
	  <input type="text" name="q" size="10" class="grey"><br>
	  <!--<select name="r"><option value="1" selected>Go to top result<option value="0">Show results list</select>-->
	</form>
      </p>
      <h2>Labels:</h2>
      <p>
        <a href="#" onClick="addLabel('Carp','Carp.html')">Add this page</a>
      </p>
      <div class="labels" id="labels">
      </div>
    </div>
  </div>

</div>

</body>
</html>
