<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <title>open - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Language" content="en-gb" />
  <link href="../css.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen" />
</head>

<script language="JavaScript" type="text/javascript" src="../label.js"></script>

<script language="JavaScript">
  pageDepth = 1;
  setPath();
</script>

<body onLoad="showToolbars();loadLabels()">

<div id="pageHeader">
  <div id="pageHeaderLogo">
    <img src="../onion.gif">
  </div>
  <div id="pageHeaderText">
    <a href="http://perldoc.perl.org">perldoc.perl.org</a>
  </div>
</div>

<div id="pageBody">
  <div id="left">
    <div id="leftContent">
      <div id="leftClose">
        <a href="#" onClick="closeLeft()" title="Hide navigation" onmouseover="leftCloseIcon.src='../close_purple.gif';" onmouseout="leftCloseIcon.src='../close_blue.gif';"><img src="../close_blue.gif" name="leftCloseIcon" id="leftCloseIcon" border=0></a>
      </div>
      <h1>Manual:</h1>
      <ul>
        <li><a href="../index-overview.html">Overview</a></li>
        <li><a href="../index-tutorials.html">Tutorials</a></li>
        <li><a href="../index-faq.html">FAQs</a></li>
        <li><a href="../index-history.html">History / Changes</a></li>
        <li><a href="../index-licence.html">Licence</a></li>
      </ul>
      <h2>Reference:</h2>
      <ul>
        <li><a href="../index-language.html">Language</a></li>
        <li><a href="../index-functions.html">Functions</a></li>
        <li><a href="../perlop.html">Operators</a></li>
        <li><a href="../perlvar.html">Special variables</a></li>
        <li><a href="../index-pragmas.html">Pragmas</a></li>
        <li><a href="../index-modules-A.html">Core modules</a></li>
        <li><a href="../index-utilities.html">Utilities</a></li>
        <li><a href="../index-internals.html">Internals</a></li>
        <li><a href="../index-platforms.html">Platform specific</a></li>
      </ul>
      <h2>Links:</h2>
      <ul>
        <li><a href="http://search.cpan.org">CPAN</a></li>
        <li><a href="http://www.perl.com">Perl.com</a></li>
        <li><a href="http://www.perl.org">Perl.org</a></li>
        <li><a href="http://www.pm.org">Perl Mongers</a></li>
        <li><a href="http://www.perlmonks.org">Perl Monks</a></li>
        <li><a href="http://planet.perl.org">Planet Perl</a></li>
        <li><a href="http://use.perl.org">Use Perl</a></li>
      </ul>
      <h2>Contact:</h2>
      <ul>
        <li>Site maintained by<br><a href="http://perl.jonallen.info">Jon Allen</a>
            (<a href="http://perl.jonallen.info">JJ</a>)</li>
        <li class="spaced">Last updated on<br>23 April 2006</li>
	<li class="spaced">See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for
	more details</li>
      </ul>
    </div>
  </div>

  <div id="center">  
    <div id="centerContent">
      <div id="contentHeader">
        <div id="contentHeaderLeft"><a href="#" onClick="showLeft()">Show navigation</a></div>
        <div id="contentHeaderCentre">-- Perl 5.8.8 documentation --</div>
        <div id="contentHeaderRight"><a href="#" onClick="showRight()">Show toolbar</a></div>
      </div>
      <div id="breadCrumbs"><a href="../index.html">Home</a> &gt; <a href="../index-language.html">Language reference</a> &gt; <a href="../index-functions.html">Functions</a> &gt; open</div>
      <script language="JavaScript">fromSearch();</script>
      <div id="contentBody"><div class="title_container"><div class="page_title">open</div></div><div class="mod_az_list"><a href="../index-functions.html">Perl functions A-Z</a> | <a href="../index-functions-by-cat.html">Perl functions by category</a> | <a href="../perlfunc.html">The 'perlfunc' manpage</a></div><ul>
<li><a name="open-FILEHANDLE%2cEXPR"></a><b>open FILEHANDLE,EXPR</b>
<p>   </p>
</li>
</ul>
<ul>
<li><a name="open-FILEHANDLE%2cMODE%2cEXPR"></a><b>open FILEHANDLE,MODE,EXPR</b>
</li>
<li><a name="open-FILEHANDLE%2cMODE%2cEXPR%2cLIST"></a><b>open FILEHANDLE,MODE,EXPR,LIST</b>
</li>
<li><a name="open-FILEHANDLE%2cMODE%2cREFERENCE"></a><b>open FILEHANDLE,MODE,REFERENCE</b>
</li>
<li><a name="open-FILEHANDLE"></a><b>open FILEHANDLE</b>
<p>Opens the file whose filename is given by EXPR, and associates it with
FILEHANDLE.</p>
<p>(The following is a comprehensive reference to open(): for a gentler
introduction you may consider <a href="../perlopentut.html">perlopentut</a>.)</p>
<p>If FILEHANDLE is an undefined scalar variable (or array or hash element)
the variable is assigned a reference to a new anonymous filehandle,
otherwise if FILEHANDLE is an expression, its value is used as the name of
the real filehandle wanted.  (This is considered a symbolic reference, so
<code class="inline"><a class="l_k" href="../functions/use.html">use</a> <a class="l_w" href="../strict.html">strict</a> <span class="q">&#39;refs&#39;</span></code>
 should <i>not</i> be in effect.)</p>
<p>If EXPR is omitted, the scalar variable of the same name as the
FILEHANDLE contains the filename.  (Note that lexical variables--those
declared with <code class="inline"><a class="l_k" href="../functions/my.html">my</a></code>--will not work for this purpose; so if you're
using <code class="inline"><a class="l_k" href="../functions/my.html">my</a></code>, specify EXPR in your call to open.)</p>
<p>If three or more arguments are specified then the mode of opening and
the file name are separate. If MODE is <code class="inline"><span class="q">&#39;&lt;&#39;</span></code>
 or nothing, the file
is opened for input.  If MODE is <code class="inline"><span class="q">&#39;&gt;&#39;</span></code>
, the file is truncated and
opened for output, being created if necessary.  If MODE is <code class="inline"><span class="q">&#39;&gt;&gt;&#39;</span></code>
,
the file is opened for appending, again being created if necessary.</p>
<p>You can put a <code class="inline"><span class="q">&#39;+&#39;</span></code>
 in front of the <code class="inline"><span class="q">&#39;&gt;&#39;</span></code>
 or <code class="inline"><span class="q">&#39;&lt;&#39;</span></code>
 to
indicate that you want both read and write access to the file; thus
<code class="inline"><span class="q">&#39;+&lt;&#39;</span></code>
 is almost always preferred for read/write updates--the <code class="inline"><span class="q">&#39;+&gt;&#39;</span></code>
 mode would clobber the file first.  You can't usually use
either read-write mode for updating textfiles, since they have
variable length records.  See the <b>-i</b> switch in <a href="../perlrun.html">perlrun</a> for a
better approach.  The file is created with permissions of <code class="inline"><span class="n">0666</span></code>

modified by the process' <code class="inline"><a class="l_k" href="../functions/umask.html">umask</a></code> value.</p>
<p>These various prefixes correspond to the fopen(3) modes of <code class="inline"><span class="q">&#39;r&#39;</span></code>
,
<code class="inline"><span class="q">&#39;r+&#39;</span></code>
, <code class="inline"><span class="q">&#39;w&#39;</span></code>
, <code class="inline"><span class="q">&#39;w+&#39;</span></code>
, <code class="inline"><span class="q">&#39;a&#39;</span></code>
, and <code class="inline"><span class="q">&#39;a+&#39;</span></code>
.</p>
<p>In the 2-arguments (and 1-argument) form of the call the mode and
filename should be concatenated (in this order), possibly separated by
spaces.  It is possible to omit the mode in these forms if the mode is
<code class="inline"><span class="q">&#39;&lt;&#39;</span></code>
.</p>
<p>If the filename begins with <code class="inline"><span class="q">&#39;|&#39;</span></code>
, the filename is interpreted as a
command to which output is to be piped, and if the filename ends with a
<code class="inline"><span class="q">&#39;|&#39;</span></code>
, the filename is interpreted as a command which pipes output to
us.  See <a href="../perlipc.html#Using-open()-for-IPC">"Using open() for IPC" in perlipc</a>
for more examples of this.  (You are not allowed to <code class="inline"><a class="l_k" href="../functions/open.html">open</a></code> to a command
that pipes both in <i>and</i> out, but see <a href="../IPC/Open2.html">IPC::Open2</a>, <a href="../IPC/Open3.html">IPC::Open3</a>,
and <a href="../perlipc.html#Bidirectional-Communication-with-Another-Process">"Bidirectional Communication with Another Process" in perlipc</a>
for alternatives.)</p>
<p>For three or more arguments if MODE is <code class="inline"><span class="q">&#39;|-&#39;</span></code>
, the filename is
interpreted as a command to which output is to be piped, and if MODE
is <code class="inline"><span class="q">&#39;-|&#39;</span></code>
, the filename is interpreted as a command which pipes
output to us.  In the 2-arguments (and 1-argument) form one should
replace dash (<code class="inline"><span class="q">&#39;-&#39;</span></code>
) with the command.
See <a href="../perlipc.html#Using-open()-for-IPC">"Using open() for IPC" in perlipc</a> for more examples of this.
(You are not allowed to <code class="inline"><a class="l_k" href="../functions/open.html">open</a></code> to a command that pipes both in <i>and</i>
out, but see <a href="../IPC/Open2.html">IPC::Open2</a>, <a href="../IPC/Open3.html">IPC::Open3</a>, and
<a href="../perlipc.html#Bidirectional-Communication">"Bidirectional Communication" in perlipc</a> for alternatives.)</p>
<p>In the three-or-more argument form of pipe opens, if LIST is specified
(extra arguments after the command name) then LIST becomes arguments
to the command invoked if the platform supports it.  The meaning of
<code class="inline"><a class="l_k" href="../functions/open.html">open</a></code> with more than three arguments for non-pipe modes is not yet
specified. Experimental "layers" may give extra LIST arguments
meaning.</p>
<p>In the 2-arguments (and 1-argument) form opening <code class="inline"><span class="q">&#39;-&#39;</span></code>
 opens STDIN
and opening <code class="inline"><span class="q">&#39;&gt;-&#39;</span></code>
 opens STDOUT.</p>
<p>You may use the three-argument form of open to specify IO "layers"
(sometimes also referred to as "disciplines") to be applied to the handle
that affect how the input and output are processed (see <a href="../open.html">open</a> and
<a href="../PerlIO.html">PerlIO</a> for more details). For example</p>
<pre class="verbatim">  <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FH<span class="cm">,</span> <span class="q">&quot;&lt;:utf8&quot;</span><span class="cm">,</span> <span class="q">&quot;file&quot;</span><span class="s">)</span></pre>
<p>will open the UTF-8 encoded file containing Unicode characters,
see <a href="../perluniintro.html">perluniintro</a>. Note that if layers are specified in the
three-arg form then default layers stored in ${^OPEN} (see <a href="../perlvar.html">perlvar</a>;
usually set by the <b>open</b> pragma or the switch <b>-CioD</b>) are ignored.</p>
<p>Open returns nonzero upon success, the undefined value otherwise.  If
the <code class="inline"><a class="l_k" href="../functions/open.html">open</a></code> involved a pipe, the return value happens to be the pid of
the subprocess.</p>
<p>If you're running Perl on a system that distinguishes between text
files and binary files, then you should check out <a href="binmode.html">binmode</a> for tips
for dealing with this.  The key distinction between systems that need
<code class="inline"><a class="l_k" href="../functions/binmode.html">binmode</a></code> and those that don't is their text file formats.  Systems
like Unix, Mac OS, and Plan 9, which delimit lines with a single
character, and which encode that character in C as <code class="inline"><span class="q">&quot;\n&quot;</span></code>
, do not
need <code class="inline"><a class="l_k" href="../functions/binmode.html">binmode</a></code>.  The rest need it.</p>
<p>When opening a file, it's usually a bad idea to continue normal execution
if the request failed, so <code class="inline"><a class="l_k" href="../functions/open.html">open</a></code> is frequently used in connection with
<code class="inline"><a class="l_k" href="../functions/die.html">die</a></code>.  Even if <code class="inline"><a class="l_k" href="../functions/die.html">die</a></code> won't do what you want (say, in a CGI script,
where you want to make a nicely formatted error message (but there are
modules that can help with that problem)) you should always check
the return value from opening a file.  The infrequent exception is when
working with an unopened filehandle is actually what you want to do.</p>
<p>As a special case the 3-arg form with a read/write mode and the third
argument being <code class="inline"><a class="l_k" href="../functions/undef.html">undef</a></code>:</p>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>TMP<span class="cm">,</span> <span class="q">&quot;+&gt;&quot;</span><span class="cm">,</span> <a class="l_k" href="../functions/undef.html">undef</a><span class="s">)</span> or <a class="l_k" href="../functions/die.html">die</a> ...</pre>
<p>opens a filehandle to an anonymous temporary file.  Also using "+&lt;"
works for symmetry, but you really should consider writing something
to the temporary file first.  You will need to seek() to do the
reading.</p>
<p>Since v5.8.0, perl has built using PerlIO by default.  Unless you've
changed this (i.e. Configure -Uuseperlio), you can open file handles to
"in memory" files held in Perl scalars via:</p>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="q">&#39;&gt;&#39;</span><span class="cm">,</span> \<span class="i">$variable</span><span class="s">)</span> || ..</pre>
<p>Though if you try to re-open <code class="inline">STDOUT</code>
 or <code class="inline">STDERR</code>
 as an "in memory"
file, you have to close it first:</p>
<pre class="verbatim">    <a class="l_k" href="../functions/close.html">close</a> STDOUT<span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a> STDOUT<span class="cm">,</span> <span class="q">&#39;&gt;&#39;</span><span class="cm">,</span> \<span class="i">$variable</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t open STDOUT: $!&quot;</span><span class="sc">;</span></pre>
<p>Examples:</p>
<pre class="verbatim">    $ARTICLE = 100;
    open ARTICLE or die "Can't find article $ARTICLE: $!\n";
    while (&lt;ARTICLE&gt;) {...</pre><pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>LOG<span class="cm">,</span> <span class="q">&#39;&gt;&gt;/usr/spool/news/twitlog&#39;</span><span class="s">)</span><span class="sc">;</span>	<span class="c"># (log is reserved)</span>
    <span class="c"># if the open fails, output is discarded</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>DBASE<span class="cm">,</span> <span class="q">&#39;+&lt;&#39;</span><span class="cm">,</span> <span class="q">&#39;dbase.mine&#39;</span><span class="s">)</span>		<span class="c"># open for update</span>
	or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t open &#39;dbase.mine&#39; for update: $!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>DBASE<span class="cm">,</span> <span class="q">&#39;+&lt;dbase.mine&#39;</span><span class="s">)</span>			<span class="c"># ditto</span>
	or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t open &#39;dbase.mine&#39; for update: $!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>ARTICLE<span class="cm">,</span> <span class="q">&#39;-|&#39;</span><span class="cm">,</span> <span class="q">&quot;caesar &lt;$article&quot;</span><span class="s">)</span>     <span class="c"># decrypt article</span>
	or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t start caesar: $!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>ARTICLE<span class="cm">,</span> <span class="q">&quot;caesar &lt;$article |&quot;</span><span class="s">)</span>		<span class="c"># ditto</span>
	or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t start caesar: $!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>EXTRACT<span class="cm">,</span> <span class="q">&quot;|sort &gt;Tmp$$&quot;</span><span class="s">)</span>		<span class="c"># $$ is our process id</span>
	or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t start sort: $!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <span class="c"># in memory files</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>MEMORY<span class="cm">,</span><span class="q">&#39;&gt;&#39;</span><span class="cm">,</span> \<span class="i">$var</span><span class="s">)</span>
	or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t open memory file: $!&quot;</span><span class="sc">;</span>
    <a class="l_k" href="../functions/print.html">print</a> <span class="i">MEMORY</span> <span class="q">&quot;foo!\n&quot;</span><span class="sc">;</span>			<span class="c"># output will end up in $var</span></pre>
<pre class="verbatim">    <span class="c"># process argument list of files along with any includes</span></pre>
<pre class="verbatim">    foreach <span class="i">$file</span> <span class="s">(</span><span class="i">@ARGV</span><span class="s">)</span> <span class="s">{</span>
	<span class="i">process</span><span class="s">(</span><span class="i">$file</span><span class="cm">,</span> <span class="q">&#39;fh00&#39;</span><span class="s">)</span><span class="sc">;</span>
    <span class="s">}</span></pre>
<pre class="verbatim">    sub process {
	my($filename, $input) = @_;
	$input++;		# this is a string increment
	unless (open($input, $filename)) {
	    print STDERR "Can't open $filename: $!\n";
	    return;
	}</pre><pre class="verbatim">	local $_;
	while (&lt;$input&gt;) {		# note use of indirection
	    if (/^#include "(.*)"/) {
		process($1, $input);
		next;
	    }
	    #...		# whatever
	}
    }</pre><p>See <a href="../perliol.html">perliol</a> for detailed info on PerlIO.</p>
<p>You may also, in the Bourne shell tradition, specify an EXPR beginning
with <code class="inline"><span class="q">&#39;&gt;&amp;&#39;</span></code>
, in which case the rest of the string is interpreted
as the name of a filehandle (or file descriptor, if numeric) to be
duped (as <i>dup(2)</i>) and opened.  You may use <code class="inline"><span class="i">&amp;</span></code>
 after <code class="inline">&gt;</code>,
<code class="inline">&gt;&gt;</code>
, <code class="inline">&lt;</code>
, <code class="inline">+&gt;</code>, <code class="inline">+&gt;&gt;</code>
, and <code class="inline">+&lt;</code>
.
The mode you specify should match the mode of the original filehandle.
(Duping a filehandle does not take into account any existing contents
of IO buffers.) If you use the 3-arg form then you can pass either a
number, the name of a filehandle or the normal "reference to a glob".</p>
<p>Here is a script that saves, redirects, and restores <code class="inline">STDOUT</code>
 and
<code class="inline">STDERR</code>
 using various methods:</p>
<pre class="verbatim">    <span class="c">#!/usr/bin/perl</span>
    <a class="l_k" href="../functions/open.html">open</a> <a class="l_k" href="../functions/my.html">my</a> <span class="i">$oldout</span><span class="cm">,</span> <span class="q">&quot;&gt;&amp;STDOUT&quot;</span>     or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t dup STDOUT: $!&quot;</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a> OLDERR<span class="cm">,</span>     <span class="q">&quot;&gt;&amp;&quot;</span><span class="cm">,</span> \<span class="i">*STDERR</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t dup STDERR: $!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a> STDOUT<span class="cm">,</span> <span class="q">&#39;&gt;&#39;</span><span class="cm">,</span> <span class="q">&quot;foo.out&quot;</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t redirect STDOUT: $!&quot;</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a> STDERR<span class="cm">,</span> <span class="q">&quot;&gt;&amp;STDOUT&quot;</span>     or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t dup STDOUT: $!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/select.html">select</a> STDERR<span class="sc">;</span> <span class="i">$|</span> = <span class="n">1</span><span class="sc">;</span>	<span class="c"># make unbuffered</span>
    <a class="l_k" href="../functions/select.html">select</a> STDOUT<span class="sc">;</span> <span class="i">$|</span> = <span class="n">1</span><span class="sc">;</span>	<span class="c"># make unbuffered</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/print.html">print</a> <span class="i">STDOUT</span> <span class="q">&quot;stdout 1\n&quot;</span><span class="sc">;</span>	<span class="c"># this works for</span>
    <a class="l_k" href="../functions/print.html">print</a> <span class="i">STDERR</span> <span class="q">&quot;stderr 1\n&quot;</span><span class="sc">;</span> 	<span class="c"># subprocesses too</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a> STDOUT<span class="cm">,</span> <span class="q">&quot;&gt;&amp;&quot;</span><span class="cm">,</span> <span class="i">$oldout</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t dup \$oldout: $!&quot;</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a> STDERR<span class="cm">,</span> <span class="q">&quot;&gt;&amp;OLDERR&quot;</span>    or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t dup OLDERR: $!&quot;</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/print.html">print</a> <span class="i">STDOUT</span> <span class="q">&quot;stdout 2\n&quot;</span><span class="sc">;</span>
    <a class="l_k" href="../functions/print.html">print</a> <span class="i">STDERR</span> <span class="q">&quot;stderr 2\n&quot;</span><span class="sc">;</span></pre>
<p>If you specify <code class="inline"><span class="q">&#39;&lt;&amp;=X&#39;</span></code>
, where <code class="inline">X</code>
 is a file descriptor number
or a filehandle, then Perl will do an equivalent of C's <code class="inline">fdopen</code>
 of
that file descriptor (and not call <i>dup(2)</i>); this is more
parsimonious of file descriptors.  For example:</p>
<pre class="verbatim">    <span class="c"># open for input, reusing the fileno of $fd</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FILEHANDLE<span class="cm">,</span> <span class="q">&quot;&lt;&amp;=$fd&quot;</span><span class="s">)</span></pre>
<p>or</p>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FILEHANDLE<span class="cm">,</span> <span class="q">&quot;&lt;&amp;=&quot;</span><span class="cm">,</span> <span class="i">$fd</span><span class="s">)</span></pre>
<p>or</p>
<pre class="verbatim">    <span class="c"># open for append, using the fileno of OLDFH</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FH<span class="cm">,</span> <span class="q">&quot;&gt;&gt;&amp;=&quot;</span><span class="cm">,</span> OLDFH<span class="s">)</span></pre>
<p>or</p>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FH<span class="cm">,</span> <span class="q">&quot;&gt;&gt;&amp;=OLDFH&quot;</span><span class="s">)</span></pre>
<p>Being parsimonious on filehandles is also useful (besides being
parsimonious) for example when something is dependent on file
descriptors, like for example locking using flock().  If you do just
<code class="inline"><a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>A<span class="cm">,</span> <span class="q">&#39;&gt;&gt;&amp;B&#39;</span><span class="s">)</span></code>
, the filehandle A will not have the same file
descriptor as B, and therefore flock(A) will not flock(B), and vice
versa.  But with <code class="inline"><a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>A<span class="cm">,</span> <span class="q">&#39;&gt;&gt;&amp;=B&#39;</span><span class="s">)</span></code>
 the filehandles will share
the same file descriptor.</p>
<p>Note that if you are using Perls older than 5.8.0, Perl will be using
the standard C libraries' fdopen() to implement the "=" functionality.
On many UNIX systems fdopen() fails when file descriptors exceed a
certain value, typically 255.  For Perls 5.8.0 and later, PerlIO is
most often the default.</p>
<p>You can see whether Perl has been compiled with PerlIO or not by
running <code class="inline">perl -V</code>
 and looking for <code class="inline">useperlio=</code>
 line.  If <code class="inline">useperlio</code>

is <code class="inline">define</code>
, you have PerlIO, otherwise you don't.</p>
<p>If you open a pipe on the command <code class="inline"><span class="q">&#39;-&#39;</span></code>
, i.e., either <code class="inline"><span class="q">&#39;|-&#39;</span></code>
 or <code class="inline"><span class="q">&#39;-|&#39;</span></code>

with 2-arguments (or 1-argument) form of open(), then
there is an implicit fork done, and the return value of open is the pid
of the child within the parent process, and <code class="inline"><span class="n">0</span></code>
 within the child
process.  (Use <code class="inline"><a class="l_k" href="../functions/defined.html">defined($pid)</a></code> to determine whether the open was successful.)
The filehandle behaves normally for the parent, but i/o to that
filehandle is piped from/to the STDOUT/STDIN of the child process.
In the child process the filehandle isn't opened--i/o happens from/to
the new STDOUT or STDIN.  Typically this is used like the normal
piped open when you want to exercise more control over just how the
pipe command gets executed, such as when you are running setuid, and
don't want to have to scan shell commands for metacharacters.
The following triples are more or less equivalent:</p>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&quot;|tr &#39;[a-z]&#39; &#39;[A-Z]&#39;&quot;</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&#39;|-&#39;</span><span class="cm">,</span> <span class="q">&quot;tr &#39;[a-z]&#39; &#39;[A-Z]&#39;&quot;</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&#39;|-&#39;</span><span class="s">)</span> || <a class="l_k" href="../functions/exec.html">exec</a> <span class="q">&#39;tr&#39;</span><span class="cm">,</span> <span class="q">&#39;[a-z]&#39;</span><span class="cm">,</span> <span class="q">&#39;[A-Z]&#39;</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&#39;|-&#39;</span><span class="cm">,</span> <span class="q">&quot;tr&quot;</span><span class="cm">,</span> <span class="q">&#39;[a-z]&#39;</span><span class="cm">,</span> <span class="q">&#39;[A-Z]&#39;</span><span class="s">)</span><span class="sc">;</span></pre>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&quot;cat -n &#39;$file&#39;|&quot;</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&#39;-|&#39;</span><span class="cm">,</span> <span class="q">&quot;cat -n &#39;$file&#39;&quot;</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&#39;-|&#39;</span><span class="s">)</span> || <a class="l_k" href="../functions/exec.html">exec</a> <span class="q">&#39;cat&#39;</span><span class="cm">,</span> <span class="q">&#39;-n&#39;</span><span class="cm">,</span> <span class="i">$file</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&#39;-|&#39;</span><span class="cm">,</span> <span class="q">&quot;cat&quot;</span><span class="cm">,</span> <span class="q">&#39;-n&#39;</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span><span class="sc">;</span></pre>
<p>The last example in each block shows the pipe as "list form", which is
not yet supported on all platforms.  A good rule of thumb is that if
your platform has true <code class="inline"><a class="l_k" href="../functions/fork.html">fork()</a></code> (in other words, if your platform is
UNIX) you can use the list form.</p>
<p>See <a href="../perlipc.html#Safe-Pipe-Opens">"Safe Pipe Opens" in perlipc</a> for more examples of this.</p>
<p>Beginning with v5.6.0, Perl will attempt to flush all files opened for
output before any operation that may do a fork, but this may not be
supported on some platforms (see <a href="../perlport.html">perlport</a>).  To be safe, you may need
to set <code class="inline"><span class="i">$|</span></code>
 ($AUTOFLUSH in English) or call the <code class="inline"><span class="i">autoflush</span><span class="s">(</span><span class="s">)</span></code>
 method
of <code class="inline"><a class="l_w" href="../IO/Handle.html">IO::Handle</a></code> on any open handles.</p>
<p>On systems that support a close-on-exec flag on files, the flag will
be set for the newly opened file descriptor as determined by the value
of $^F.  See <a href="../perlvar.html#%24%5eF">"$^F" in perlvar</a>.</p>
<p>Closing any piped filehandle causes the parent process to wait for the
child to finish, and returns the status value in <code class="inline"><span class="i">$?</span></code>
.</p>
<p>The filename passed to 2-argument (or 1-argument) form of open() will
have leading and trailing whitespace deleted, and the normal
redirection characters honored.  This property, known as "magic open",
can often be used to good effect.  A user could specify a filename of
<i>"rsh cat file |"</i>, or you could change certain filenames as needed:</p>
<pre class="verbatim">    <span class="i">$filename</span> =~ <span class="q">s/(.*\.gz)\s*$/gzip -dc &lt; $1|/</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FH<span class="cm">,</span> <span class="i">$filename</span><span class="s">)</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;Can&#39;t open $filename: $!&quot;</span><span class="sc">;</span></pre>
<p>Use 3-argument form to open a file with arbitrary weird characters in it,</p>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&#39;&lt;&#39;</span><span class="cm">,</span> <span class="i">$file</span><span class="s">)</span><span class="sc">;</span></pre>
<p>otherwise it's necessary to protect any leading and trailing whitespace:</p>
<pre class="verbatim">    <span class="i">$file</span> =~ <span class="q">s#^(\s)#./$1#</span><span class="sc">;</span>
    <a class="l_k" href="../functions/open.html">open</a><span class="s">(</span>FOO<span class="cm">,</span> <span class="q">&quot;&lt; $file\0&quot;</span><span class="s">)</span><span class="sc">;</span></pre>
<p>(this may not work on some bizarre filesystems).  One should
conscientiously choose between the <i>magic</i> and 3-arguments form
of open():</p>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a> IN<span class="cm">,</span> <span class="i">$ARGV</span>[<span class="n">0</span>]<span class="sc">;</span></pre>
<p>will allow the user to specify an argument of the form <code class="inline"><span class="q">&quot;rsh cat file |&quot;</span></code>
,
but will not work on a filename which happens to have a trailing space, while</p>
<pre class="verbatim">    <a class="l_k" href="../functions/open.html">open</a> IN<span class="cm">,</span> <span class="q">&#39;&lt;&#39;</span><span class="cm">,</span> <span class="i">$ARGV</span>[<span class="n">0</span>]<span class="sc">;</span></pre>
<p>will have exactly the opposite restrictions.</p>
<p>If you want a "real" C <code class="inline"><a class="l_k" href="../functions/open.html">open</a></code> (see <i>open(2)</i> on your system), then you
should use the <code class="inline"><a class="l_k" href="../functions/sysopen.html">sysopen</a></code> function, which involves no such magic (but
may use subtly different filemodes than Perl open(), which is mapped
to C fopen()).  This is
another way to protect your filenames from interpretation.  For example:</p>
<pre class="verbatim">    <a class="l_k" href="../functions/use.html">use</a> <a class="l_w" href="../IO/Handle.html">IO::Handle</a><span class="sc">;</span>
    <a class="l_k" href="../functions/sysopen.html">sysopen</a><span class="s">(</span>HANDLE<span class="cm">,</span> <span class="i">$path</span><span class="cm">,</span> O_RDWR|O_CREAT|O_EXCL<span class="s">)</span>
	or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;sysopen $path: $!&quot;</span><span class="sc">;</span>
    <span class="i">$oldfh</span> = <a class="l_k" href="../functions/select.html">select</a><span class="s">(</span>HANDLE<span class="s">)</span><span class="sc">;</span> <span class="i">$|</span> = <span class="n">1</span><span class="sc">;</span> <a class="l_k" href="../functions/select.html">select</a><span class="s">(</span><span class="i">$oldfh</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="../functions/print.html">print</a> <span class="i">HANDLE</span> <span class="q">&quot;stuff $$\n&quot;</span><span class="sc">;</span>
    <a class="l_k" href="../functions/seek.html">seek</a><span class="s">(</span>HANDLE<span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="../functions/print.html">print</a> <span class="q">&quot;File contains: &quot;</span><span class="cm">,</span> <span class="q">&lt;HANDLE&gt;</span><span class="sc">;</span></pre>
<p>Using the constructor from the <code class="inline"><a class="l_w" href="../IO/Handle.html">IO::Handle</a></code> package (or one of its
subclasses, such as <code class="inline"><a class="l_w" href="../IO/File.html">IO::File</a></code> or <code class="inline"><a class="l_w" href="../IO/Socket.html">IO::Socket</a></code>), you can generate anonymous
filehandles that have the scope of whatever variables hold references to
them, and automatically close whenever and however you leave that scope:</p>
<pre class="verbatim">    <a class="l_k" href="../functions/use.html">use</a> <a class="l_w" href="../IO/File.html">IO::File</a><span class="sc">;</span>
    <span class="c">#...</span>
<a name="read_myfile_munged"></a>    sub <span class="m">read_myfile_munged</span> <span class="s">{</span>
	<a class="l_k" href="../functions/my.html">my</a> <span class="i">$ALL</span> = <a class="l_k" href="../functions/shift.html">shift</a><span class="sc">;</span>
	<a class="l_k" href="../functions/my.html">my</a> <span class="i">$handle</span> = new <a class="l_w" href="../IO/File.html">IO::File</a><span class="sc">;</span>
	<a class="l_k" href="../functions/open.html">open</a><span class="s">(</span><span class="i">$handle</span><span class="cm">,</span> <span class="q">&quot;myfile&quot;</span><span class="s">)</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;myfile: $!&quot;</span><span class="sc">;</span>
	<span class="i">$first</span> = <span class="q">&lt;$handle&gt;</span>
	    or <a class="l_k" href="../functions/return.html">return</a> <span class="s">(</span><span class="s">)</span><span class="sc">;</span>     <span class="c"># Automatically closed here.</span>
	mung <span class="i">$first</span> or <a class="l_k" href="../functions/die.html">die</a> <span class="q">&quot;mung failed&quot;</span><span class="sc">;</span>	<span class="c"># Or here.</span>
	<a class="l_k" href="../functions/return.html">return</a> <span class="i">$first</span><span class="cm">,</span> <span class="q">&lt;$handle&gt;</span> if <span class="i">$ALL</span><span class="sc">;</span>	<span class="c"># Or here.</span>
	<span class="i">$first</span><span class="sc">;</span>					<span class="c"># Or here.</span>
    <span class="s">}</span></pre>
<p>See <a href="seek.html">seek</a> for some details about mixing reading and writing.</p>
</li>
</ul>
</div>
      <div id="contentFooter"><a href="http://www.perl.org"><img src="../perlpowered.png" border=0></a></div>
    </div>
  </div>

  <div id="right">
    <div id="rightContent">
      <div id="leftClose">
        <a href="#" onClick="closeRight()" title="Hide toolbar" onmouseover="rightCloseIcon.src='../close_purple.gif';" onmouseout="rightCloseIcon.src='../close_blue.gif';"><img src="../close_blue.gif" name="rightCloseIcon" id="rightCloseIcon" border=0></a>
      </div>
      <h1>Search:</h1>
      <p>
        <form action="../search.html" name="perldoc_search">
	  <input type="text" name="q" size="10" class="grey"><br>
	  <!--<select name="r"><option value="1" selected>Go to top result<option value="0">Show results list</select>-->
	</form>
      </p>
      <h2>Labels:</h2>
      <p>
        <a href="#" onClick="addLabel('open','functions/open.html')">Add this page</a>
      </p>
      <div class="labels" id="labels">
      </div>
    </div>
  </div>

</div>

</body>
</html>
