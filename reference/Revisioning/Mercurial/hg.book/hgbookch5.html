<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>5 Mercurial in daily use</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<!-- html4-uni,2,html,xhtml --> 
<meta name="src" content="hgbook.tex" /> 
<meta name="date" content="2007-12-14 11:09:00" /> 
<link rel="stylesheet" type="text/css" href="hgbook.css" /> 
</head><body 
>
   <!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="hgbookch6.html" >next</a>] [<a 
href="hgbookch4.html" >prev</a>] [<a 
href="hgbookch4.html#tailhgbookch4.html" >prev-tail</a>] [<a 
href="#tailhgbookch5.html">tail</a>] [<a 
href="hgbook.html#hgbookch5.html" >up</a>] </p></div>
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;5</span><br /><a 
 id="x9-890005"></a>Mercurial in daily use</h2>
   <h3 class="sectionHead"><span class="titlemark">5.1    </span> <a 
 id="x9-900005.1"></a>Telling Mercurial which files to track</h3>
<!--l. 6--><p class="noindent" >Mercurial does not work with files in your repository unless you tell it to manage them. The <a 
 id="dx9-90001"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D; command will tell
you which files Mercurial doesn&#x2019;t know about; it uses a &#x201C;<span 
class="pcrr7tn-">?</span>&#x201D; to display such files.
</p><!--l. 11--><p class="indent" >   To tell Mercurial to track a file, use the <a 
 id="dx9-90002"></a>&#x201C;<span 
class="pcrr7tn-">hg add</span>&#x201D; command. Once you have added a file, the entry in the output of <a 
 id="dx9-90003"></a>&#x201C;<span 
class="pcrr7tn-">hg</span>
<span 
class="pcrr7tn-">status</span>&#x201D; for that file changes from &#x201C;<span 
class="pcrr7tn-">?</span>&#x201D; to &#x201C;<span 
class="pcrr7tn-">A</span>&#x201D;.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-90005r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;init</span><span 
class="pcrb7t-">&#x00A0;add-example</span>
<br class="fancyvrb" /><a 
 id="x9-90007r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;add-example</span>
<br class="fancyvrb" /><a 
 id="x9-90009r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-90011r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
<br class="fancyvrb" /><a 
 id="x9-90013r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-90015r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-90017r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
<br class="fancyvrb" /><a 
 id="x9-90019r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-90021r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Added</span><span 
class="pcrb7t-">&#x00A0;one</span><span 
class="pcrb7t-">&#x00A0;file'</span>
<br class="fancyvrb" /><a 
 id="x9-90023r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
   </div>
<!--l. 16--><p class="indent" >   After you run a <a 
 id="dx9-90024"></a>&#x201C;<span 
class="pcrr7tn-">hg commit</span>&#x201D;, the files that you added before the commit will no longer be listed in the output of <a 
 id="dx9-90025"></a>&#x201C;<span 
class="pcrr7tn-">hg</span>
<span 
class="pcrr7tn-">status</span>&#x201D;. The reason for this is that <a 
 id="dx9-90026"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D; only tells you about &#x201C;interesting&#x201D; files&#x2014;those that you have modified or told
Mercurial to do something with&#x2014;by default. If you have a repository that contains thousands of files, you will rarely want to
know about files that Mercurial is tracking, but that have not changed. (You can still get this information; we&#x2019;ll return to this
later.)
</p><!--l. 25--><p class="indent" >   Once you add a file, Mercurial doesn&#x2019;t do anything with it immediately. Instead, it will take a snapshot of the file&#x2019;s state the
next time you perform a commit. It will then continue to track the changes you make to the file every time you commit, until
you remove the file.
</p><!--l. 31--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.1.1    </span> <a 
 id="x9-910005.1.1"></a>Explicit versus implicit file naming</h4>
<!--l. 33--><p class="noindent" >A useful behaviour that Mercurial has is that if you pass the name of a directory to a command, every Mercurial command will
treat this as &#x201C;I want to operate on every file in this directory and its subdirectories&#x201D;.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-91002r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">mkdir</span><span 
class="pcrb7t-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-91004r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;b</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;b/b</span>
<br class="fancyvrb" /><a 
 id="x9-91006r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;c</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;b/c</span>
<br class="fancyvrb" /><a 
 id="x9-91008r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">mkdir</span><span 
class="pcrb7t-">&#x00A0;b/d</span>
<br class="fancyvrb" /><a 
 id="x9-91010r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;d</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;b/d/d</span>
<br class="fancyvrb" /><a 
 id="x9-91012r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-91014r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;b/b</span>
<br class="fancyvrb" /><a 
 id="x9-91016r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;b/c</span>
<br class="fancyvrb" /><a 
 id="x9-91018r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;b/d/d</span>
<br class="fancyvrb" /><a 
 id="x9-91020r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Added</span><span 
class="pcrb7t-">&#x00A0;all</span><span 
class="pcrb7t-">&#x00A0;files</span><span 
class="pcrb7t-">&#x00A0;in</span><span 
class="pcrb7t-">&#x00A0;subdirectory'</span>
   </div>
                                                                                         
                                                                                         
<!--l. 38--><p class="noindent" >Notice in this example that Mercurial printed the names of the files it added, whereas it didn&#x2019;t do so when we added the file named
<span 
class="pcrr7tn-">a </span>in the earlier example.
</p><!--l. 42--><p class="indent" >   What&#x2019;s going on is that in the former case, we explicitly named the file to add on the command line, so the
assumption that Mercurial makes in such cases is that you know what you were doing, and it doesn&#x2019;t print any
output.
</p><!--l. 47--><p class="indent" >   However, when we <span 
class="ptmri7t-">imply </span>the names of files by giving the name of a directory, Mercurial takes the extra step of printing the
name of each file that it does something with. This makes it more clear what is happening, and reduces the likelihood of a silent
and nasty surprise. This behaviour is common to most Mercurial commands.
</p><!--l. 53--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.1.2    </span> <a 
 id="x9-920005.1.2"></a>Aside: Mercurial tracks files, not directories</h4>
<!--l. 55--><p class="noindent" >Mercurial does not track directory information. Instead, it tracks the path to a file. Before creating a file, it first creates any
missing directory components of the path. After it deletes a file, it then deletes any empty directories that were in the deleted
file&#x2019;s path. This sounds like a trivial distinction, but it has one minor practical consequence: it is not possible to represent a
completely empty directory in Mercurial.
</p><!--l. 63--><p class="indent" >   Empty directories are rarely useful, and there are unintrusive workarounds that you can use to achieve an appropriate effect.
The developers of Mercurial thus felt that the complexity that would be required to manage empty directories was not worth the
limited benefit this feature would bring.
</p><!--l. 69--><p class="indent" >   If you need an empty directory in your repository, there are a few ways to achieve this. One is to create a directory, then <a 
 id="dx9-92001"></a>&#x201C;<span 
class="pcrr7tn-">hg</span>
<span 
class="pcrr7tn-">add</span>&#x201D; a &#x201C;hidden&#x201D; file to that directory. On Unix-like systems, any file name that begins with a period (&#x201C;<span 
class="pcrr7tn-">.</span>&#x201D;) is treated as hidden
by most commands and GUI tools. This approach is illustrated in figure&#x00A0;<a 
href="#x9-920281">5.1<!--tex4ht:ref: ex:daily:hidden --></a>.
</p>
   <hr class="figure" /><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x9-920281"></a>
                                                                                         
                                                                                         
<div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-92003r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;init</span><span 
class="pcrb7t-">&#x00A0;hidden-example</span>
<br class="fancyvrb" /><a 
 id="x9-92005r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;hidden-example</span>
<br class="fancyvrb" /><a 
 id="x9-92007r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">mkdir</span><span 
class="pcrb7t-">&#x00A0;empty</span>
<br class="fancyvrb" /><a 
 id="x9-92009r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">touch</span><span 
class="pcrb7t-">&#x00A0;empty/.hidden</span>
<br class="fancyvrb" /><a 
 id="x9-92011r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;empty/.hidden</span>
<br class="fancyvrb" /><a 
 id="x9-92013r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Manage</span><span 
class="pcrb7t-">&#x00A0;an</span><span 
class="pcrb7t-">&#x00A0;empty-looking</span><span 
class="pcrb7t-">&#x00A0;directory'</span>
<br class="fancyvrb" /><a 
 id="x9-92015r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">ls</span><span 
class="pcrb7t-">&#x00A0;empty</span>
<br class="fancyvrb" /><a 
 id="x9-92017r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;..</span>
<br class="fancyvrb" /><a 
 id="x9-92019r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;clone</span><span 
class="pcrb7t-">&#x00A0;hidden-example</span><span 
class="pcrb7t-">&#x00A0;tmp</span>
<br class="fancyvrb" /><a 
 id="x9-92021r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;updated,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;merged,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;removed,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;unresolved</span>
<br class="fancyvrb" /><a 
 id="x9-92023r11"></a><span 
class="ptmr7t-x-x-50">11</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">ls</span><span 
class="pcrb7t-">&#x00A0;tmp</span>
<br class="fancyvrb" /><a 
 id="x9-92025r12"></a><span 
class="ptmr7t-x-x-50">12</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;empty</span>
<br class="fancyvrb" /><a 
 id="x9-92027r13"></a><span 
class="ptmr7t-x-x-50">13</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">ls</span><span 
class="pcrb7t-">&#x00A0;tmp/empty</span>
</div>
<br /><table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;5.1: </td><td  
class="content">Simulating an empty directory using a hidden file</td></tr></table><!--tex4ht:label?: x9-920281 -->
                                                                                         
                                                                                         
   </td></tr></table></div><hr class="endfigure" />
<!--l. 82--><p class="indent" >   Another way to tackle a need for an empty directory is to simply create one in your automated build scripts before they will
need it.
</p>
   <h3 class="sectionHead"><span class="titlemark">5.2    </span> <a 
 id="x9-930005.2"></a>How to stop tracking a file</h3>
<!--l. 87--><p class="noindent" >Once you decide that a file no longer belongs in your repository, use the <a 
 id="dx9-93001"></a>&#x201C;<span 
class="pcrr7tn-">hg remove</span>&#x201D; command; this deletes the
file, and tells Mercurial to stop tracking it. A removed file is represented in the output of <a 
 id="dx9-93002"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D; with a
&#x201C;<span 
class="pcrr7tn-">R</span>&#x201D;.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-93004r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;init</span><span 
class="pcrb7t-">&#x00A0;remove-example</span>
<br class="fancyvrb" /><a 
 id="x9-93006r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;remove-example</span>
<br class="fancyvrb" /><a 
 id="x9-93008r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-93010r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">mkdir</span><span 
class="pcrb7t-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-93012r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;b</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;b/b</span>
<br class="fancyvrb" /><a 
 id="x9-93014r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-93016r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;b/b</span>
<br class="fancyvrb" /><a 
 id="x9-93018r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Small</span><span 
class="pcrb7t-">&#x00A0;example</span><span 
class="pcrb7t-">&#x00A0;for</span><span 
class="pcrb7t-">&#x00A0;file</span><span 
class="pcrb7t-">&#x00A0;removal'</span>
<br class="fancyvrb" /><a 
 id="x9-93020r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;remove</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-93022r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
<br class="fancyvrb" /><a 
 id="x9-93024r11"></a><span 
class="ptmr7t-x-x-50">11</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;R</span><span 
class="pcrr7tn-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-93026r12"></a><span 
class="ptmr7t-x-x-50">12</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;remove</span><span 
class="pcrb7t-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-93028r13"></a><span 
class="ptmr7t-x-x-50">13</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;removing</span><span 
class="pcrr7tn-">&#x00A0;b/b</span>
   </div>
<!--l. 93--><p class="indent" >   After you <a 
 id="dx9-93029"></a>&#x201C;<span 
class="pcrr7tn-">hg remove</span>&#x201D; a file, Mercurial will no longer track changes to that file, even if you recreate a file with the same
name in your working directory. If you do recreate a file with the same name and want Mercurial to track the new
file, simply <a 
 id="dx9-93030"></a>&#x201C;<span 
class="pcrr7tn-">hg add</span>&#x201D; it. Mercurial will know that the newly added file is not related to the old file of the same
name.
</p><!--l. 100--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.2.1    </span> <a 
 id="x9-940005.2.1"></a>Removing a file does not affect its history</h4>
<!--l. 102--><p class="noindent" >It is important to understand that removing a file has only two effects. </p>
     <ul><li><span class="dt">
     </span><span class="dd">It removes the current version of the file from the working directory.
     </span><li><span class="dt">
     </span><span class="dd">It stops Mercurial from tracking changes to the file, from the time of the next commit.</li></ul>
<!--l. 110--><p class="noindent" >Removing a file <span 
class="ptmri7t-">does not </span>in any way alter the <span 
class="ptmri7t-">history </span>of the file.
</p><!--l. 113--><p class="indent" >   If you update the working directory to a changeset in which a file that you have removed was still tracked, it will reappear in
the working directory, with the contents it had when you committed that changeset. If you then update the working directory to
a later changeset, in which the file had been removed, Mercurial will once again remove the file from the working
directory.
                                                                                         
                                                                                         
</p><!--l. 120--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.2.2    </span> <a 
 id="x9-950005.2.2"></a>Missing files</h4>
<!--l. 122--><p class="noindent" >Mercurial considers a file that you have deleted, but not used <a 
 id="dx9-95001"></a>&#x201C;<span 
class="pcrr7tn-">hg remove</span>&#x201D; to delete, to be <span 
class="ptmri7t-">missing</span>. A missing file is
represented with &#x201C;<span 
class="pcrr7tn-">!</span>&#x201D; in the output of <a 
 id="dx9-95002"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D;. Mercurial commands will not generally do anything with missing
files.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-95004r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;init</span><span 
class="pcrb7t-">&#x00A0;missing-example</span>
<br class="fancyvrb" /><a 
 id="x9-95006r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;missing-example</span>
<br class="fancyvrb" /><a 
 id="x9-95008r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-95010r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-95012r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'File</span><span 
class="pcrb7t-">&#x00A0;about</span><span 
class="pcrb7t-">&#x00A0;to</span><span 
class="pcrb7t-">&#x00A0;be</span><span 
class="pcrb7t-">&#x00A0;missing'</span>
<br class="fancyvrb" /><a 
 id="x9-95014r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">rm</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-95016r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
<br class="fancyvrb" /><a 
 id="x9-95018r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;!</span><span 
class="pcrr7tn-">&#x00A0;a</span>
   </div>
<!--l. 128--><p class="indent" >   If your repository contains a file that <a 
 id="dx9-95019"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D; reports as missing, and you want the file to stay gone, you
can run <a 
 id="dx9-95020"></a>&#x201C;<span 
class="pcrr7tn-">hg remove</span> <a 
 id="dx9-95021"></a><span 
class="pcrr7tn-">--after</span>&#x201D; at any time later on, to tell Mercurial that you really did mean to remove the
file.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-95023r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;remove</span><span 
class="pcrb7t-">&#x00A0;--after</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-95025r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
<br class="fancyvrb" /><a 
 id="x9-95027r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;R</span><span 
class="pcrr7tn-">&#x00A0;a</span>
   </div>
<!--l. 134--><p class="indent" >   On the other hand, if you deleted the missing file by accident, use <a 
 id="dx9-95028"></a>&#x201C;<span 
class="pcrr7tn-">hg revert </span><span 
class="pcrro7t-">filename</span>&#x201D; to recover the file. It will
reappear, in unmodified form.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-95030r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;revert</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-95032r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cat</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-95034r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-95036r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
   </div>
<!--l. 140--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.2.3    </span> <a 
 id="x9-960005.2.3"></a>Aside: why tell Mercurial explicitly to remove a file?</h4>
<!--l. 142--><p class="noindent" >You might wonder why Mercurial requires you to explicitly tell it that you are deleting a file. Early during the development of
Mercurial, it let you delete a file however you pleased; Mercurial would notice the absence of the file automatically when you
next ran a <a 
 id="dx9-96001"></a>&#x201C;<span 
class="pcrr7tn-">hg commit</span>&#x201D;, and stop tracking the file. In practice, this made it too easy to accidentally remove a file without
noticing.
                                                                                         
                                                                                         
</p><!--l. 150--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.2.4    </span> <a 
 id="x9-970005.2.4"></a>Useful shorthand&#x2014;adding and removing files in one step</h4>
<!--l. 152--><p class="noindent" >Mercurial offers a combination command, <a 
 id="dx9-97001"></a>&#x201C;<span 
class="pcrr7tn-">hg addremove</span>&#x201D;, that adds untracked files and marks missing files as
removed.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-97003r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;init</span><span 
class="pcrb7t-">&#x00A0;addremove-example</span>
<br class="fancyvrb" /><a 
 id="x9-97005r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;addremove-example</span>
<br class="fancyvrb" /><a 
 id="x9-97007r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-97009r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;b</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-97011r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;addremove</span>
<br class="fancyvrb" /><a 
 id="x9-97013r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-97015r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;b</span>
   </div>
<!--l. 155--><p class="noindent" >The <a 
 id="dx9-97016"></a>&#x201C;<span 
class="pcrr7tn-">hg commit</span>&#x201D; command also provides a <a 
 id="dx9-97017"></a><span 
class="pcrr7tn-">-A </span>option that performs this same add-and-remove, immediately followed by a
commit.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-97019r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;c</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;c</span>
<br class="fancyvrb" /><a 
 id="x9-97021r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-A</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Commit</span><span 
class="pcrb7t-">&#x00A0;with</span><span 
class="pcrb7t-">&#x00A0;addremove'</span>
<br class="fancyvrb" /><a 
 id="x9-97023r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;c</span>
   </div>
<!--l. 160--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5.3    </span> <a 
 id="x9-980005.3"></a>Copying files</h3>
<!--l. 162--><p class="noindent" >Mercurial provides a <a 
 id="dx9-98001"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; command that lets you make a new copy of a file. When you copy a file using this command,
Mercurial makes a record of the fact that the new file is a copy of the original file. It treats these copied files specially when you
merge your work with someone else&#x2019;s.
</p><!--l. 168--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.3.1    </span> <a 
 id="x9-990005.3.1"></a>The results of copying during a merge</h4>
<!--l. 170--><p class="noindent" >What happens during a merge is that changes &#x201C;follow&#x201D; a copy. To best illustrate what this means, let&#x2019;s create an example. We&#x2019;ll
start with the usual tiny repository that contains a single file.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-99002r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;init</span><span 
class="pcrb7t-">&#x00A0;my-copy</span>
<br class="fancyvrb" /><a 
 id="x9-99004r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;my-copy</span>
<br class="fancyvrb" /><a 
 id="x9-99006r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;line</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;file</span>
<br class="fancyvrb" /><a 
 id="x9-99008r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;file</span>
<br class="fancyvrb" /><a 
 id="x9-99010r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Added</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;file'</span>
   </div>
<!--l. 174--><p class="noindent" >We need to do some work in parallel, so that we&#x2019;ll have something to merge. So let&#x2019;s clone our repository.
                                                                                         
                                                                                         
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-99012r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;..</span>
<br class="fancyvrb" /><a 
 id="x9-99014r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;clone</span><span 
class="pcrb7t-">&#x00A0;my-copy</span><span 
class="pcrb7t-">&#x00A0;your-copy</span>
<br class="fancyvrb" /><a 
 id="x9-99016r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;updated,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;merged,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;removed,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;unresolved</span>
   </div>
<!--l. 177--><p class="noindent" >Back in our initial repository, let&#x2019;s use the <a 
 id="dx9-99017"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; command to make a copy of the first file we created.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-99019r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;my-copy</span>
<br class="fancyvrb" /><a 
 id="x9-99021r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;copy</span><span 
class="pcrb7t-">&#x00A0;file</span><span 
class="pcrb7t-">&#x00A0;new-file</span>
   </div>
<!--l. 181--><p class="indent" >   If we look at the output of the <a 
 id="dx9-99022"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D; command afterwards, the copied file looks just like a normal added
file.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-99024r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
<br class="fancyvrb" /><a 
 id="x9-99026r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;new-file</span>
   </div>
<!--l. 184--><p class="noindent" >But if we pass the <a 
 id="dx9-99027"></a><span 
class="pcrr7tn-">-C </span>option to <a 
 id="dx9-99028"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D;, it prints another line of output: this is the file that our newly-added file was copied
<span 
class="ptmri7t-">from</span>.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-99030r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;-C</span>
<br class="fancyvrb" /><a 
 id="x9-99032r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;new-file</span>
<br class="fancyvrb" /><a 
 id="x9-99034r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;file</span>
<br class="fancyvrb" /><a 
 id="x9-99036r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Copied</span><span 
class="pcrb7t-">&#x00A0;file'</span>
   </div>
<!--l. 189--><p class="indent" >   Now, back in the repository we cloned, let&#x2019;s make a change in parallel. We&#x2019;ll add a line of content to the original file that we
created.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-99038r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;../your-copy</span>
<br class="fancyvrb" /><a 
 id="x9-99040r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;'new</span><span 
class="pcrb7t-">&#x00A0;contents'</span><span 
class="pcrb7t-">&#x00A0;&#x003e;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;file</span>
<br class="fancyvrb" /><a 
 id="x9-99042r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;commit</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Changed</span><span 
class="pcrb7t-">&#x00A0;file'</span>
   </div>
<!--l. 193--><p class="noindent" >Now we have a modified <span 
class="pcrr7tn-">file </span>in this repository. When we pull the changes from the first repository, and merge the two heads,
Mercurial will propagate the changes that we made locally to <span 
class="pcrr7tn-">file </span>into its copy, <span 
class="pcrr7tn-">new-file</span>.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-99044r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;pull</span><span 
class="pcrb7t-">&#x00A0;../my-copy</span>
<br class="fancyvrb" /><a 
 id="x9-99046r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;pulling</span><span 
class="pcrr7tn-">&#x00A0;from</span><span 
class="pcrr7tn-">&#x00A0;../my-copy</span>
<br class="fancyvrb" /><a 
 id="x9-99048r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;searching</span><span 
class="pcrr7tn-">&#x00A0;for</span><span 
class="pcrr7tn-">&#x00A0;changes</span>
<br class="fancyvrb" /><a 
 id="x9-99050r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;changesets</span>
<br class="fancyvrb" /><a 
 id="x9-99052r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;manifests</span>
<br class="fancyvrb" /><a 
 id="x9-99054r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;file</span><span 
class="pcrr7tn-">&#x00A0;changes</span>
                                                                                         
                                                                                         
<br class="fancyvrb" /><a 
 id="x9-99056r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;added</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;changesets</span><span 
class="pcrr7tn-">&#x00A0;with</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;changes</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;(+1</span><span 
class="pcrr7tn-">&#x00A0;heads)</span>
<br class="fancyvrb" /><a 
 id="x9-99058r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;(run</span><span 
class="pcrr7tn-">&#x00A0;'hg</span><span 
class="pcrr7tn-">&#x00A0;heads'</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;see</span><span 
class="pcrr7tn-">&#x00A0;heads,</span><span 
class="pcrr7tn-">&#x00A0;'hg</span><span 
class="pcrr7tn-">&#x00A0;merge'</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;merge)</span>
<br class="fancyvrb" /><a 
 id="x9-99060r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;merge</span>
<br class="fancyvrb" /><a 
 id="x9-99062r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;merging</span><span 
class="pcrr7tn-">&#x00A0;file</span><span 
class="pcrr7tn-">&#x00A0;and</span><span 
class="pcrr7tn-">&#x00A0;new-file</span>
<br class="fancyvrb" /><a 
 id="x9-99064r11"></a><span 
class="ptmr7t-x-x-50">11</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;updated,</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;merged,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;removed,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;unresolved</span>
<br class="fancyvrb" /><a 
 id="x9-99066r12"></a><span 
class="ptmr7t-x-x-50">12</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;(branch</span><span 
class="pcrr7tn-">&#x00A0;merge,</span><span 
class="pcrr7tn-">&#x00A0;don't</span><span 
class="pcrr7tn-">&#x00A0;forget</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;commit)</span>
<br class="fancyvrb" /><a 
 id="x9-99068r13"></a><span 
class="ptmr7t-x-x-50">13</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cat</span><span 
class="pcrb7t-">&#x00A0;new-file</span>
<br class="fancyvrb" /><a 
 id="x9-99070r14"></a><span 
class="ptmr7t-x-x-50">14</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;line</span>
<br class="fancyvrb" /><a 
 id="x9-99072r15"></a><span 
class="ptmr7t-x-x-50">15</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;new</span><span 
class="pcrr7tn-">&#x00A0;contents</span>
   </div>
<!--l. 199--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.3.2    </span> <a 
 id="x9-1000005.3.2"></a>Why should changes follow copies?</h4>
<!--l. 202--><p class="noindent" >This behaviour, of changes to a file propagating out to copies of the file, might seem esoteric, but in most cases it&#x2019;s highly
desirable.
</p><!--l. 205--><p class="indent" >   First of all, remember that this propagation <span 
class="ptmri7t-">only </span>happens when you merge. So if you <a 
 id="dx9-100001"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; a file, and subsequently
modify the original file during the normal course of your work, nothing will happen.
</p><!--l. 210--><p class="indent" >   The second thing to know is that modifications will only propagate across a copy as long as the repository that you&#x2019;re
pulling changes from <span 
class="ptmri7t-">doesn&#x2019;t know </span>about the copy.
</p><!--l. 214--><p class="indent" >   The reason that Mercurial does this is as follows. Let&#x2019;s say I make an important bug fix in a source file, and commit my
changes. Meanwhile, you&#x2019;ve decided to <a 
 id="dx9-100002"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; the file in your repository, without knowing about the bug or having seen
the fix, and you have started hacking on your copy of the file.
</p><!--l. 220--><p class="indent" >   If you pulled and merged my changes, and Mercurial <span 
class="ptmri7t-">didn&#x2019;t </span>propagate changes across copies, your source file would now
contain the bug, and unless you remembered to propagate the bug fix by hand, the bug would <span 
class="ptmri7t-">remain </span>in your copy of the
file.
</p><!--l. 225--><p class="indent" >   By automatically propagating the change that fixed the bug from the original file to the copy, Mercurial prevents this class
of problem. To my knowledge, Mercurial is the <span 
class="ptmri7t-">only </span>revision control system that propagates changes across copies like
this.
</p><!--l. 230--><p class="indent" >   Once your change history has a record that the copy and subsequent merge occurred, there&#x2019;s usually no further need to
propagate changes from the original file to the copied file, and that&#x2019;s why Mercurial only propagates changes across copies until
this point, and no further.
</p><!--l. 236--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.3.3    </span> <a 
 id="x9-1010005.3.3"></a>How to make changes <span 
class="ptmri7t-">not </span>follow a copy</h4>
<!--l. 238--><p class="noindent" >If, for some reason, you decide that this business of automatically propagating changes across copies is not for you, simply use
your system&#x2019;s normal file copy command (on Unix-like systems, that&#x2019;s <a 
 id="dx9-101001"></a><span 
class="pcrr7tn-">cp</span>) to make a copy of a file, then <a 
 id="dx9-101002"></a>&#x201C;<span 
class="pcrr7tn-">hg add</span>&#x201D; the new
copy by hand. Before you do so, though, please do reread section&#x00A0;<a 
href="#x9-1000005.3.2">5.3.2<!--tex4ht:ref: sec:daily:why-copy --></a>, and make an informed decision that this behaviour is
not appropriate to your specific case.
</p><!--l. 246--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.3.4    </span> <a 
 id="x9-1020005.3.4"></a>Behaviour of the &#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; command</h4>
<!--l. 248--><p class="noindent" >When you use the <a 
 id="dx9-102001"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; command, Mercurial makes a copy of each source file as it currently stands in the working
directory. This means that if you make some modifications to a file, then <a 
 id="dx9-102002"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; it without first having committed those
changes, the new copy will also contain the modifications you have made up until that point. (I find this behaviour a little
                                                                                         
                                                                                         
counterintuitive, which is why I mention it here.)
</p><!--l. 256--><p class="indent" >   The <a 
 id="dx9-102003"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; command acts similarly to the Unix <a 
 id="dx9-102004"></a><span 
class="pcrr7tn-">cp </span>command (you can use the <a 
 id="dx9-102005"></a>&#x201C;<span 
class="pcrr7tn-">hg cp</span>&#x201D; alias if you prefer). The last
argument is the <span 
class="ptmri7t-">destination</span>, and all prior arguments are <span 
class="ptmri7t-">sources</span>. If you pass it a single file as the source, and the destination
does not exist, it creates a new file with that name.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-102007r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">mkdir</span><span 
class="pcrb7t-">&#x00A0;k</span>
<br class="fancyvrb" /><a 
 id="x9-102009r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;copy</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;k</span>
<br class="fancyvrb" /><a 
 id="x9-102011r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">ls</span><span 
class="pcrb7t-">&#x00A0;k</span>
<br class="fancyvrb" /><a 
 id="x9-102013r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;a</span>
   </div>
<!--l. 262--><p class="noindent" >If the destination is a directory, Mercurial copies its sources into that directory.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-102015r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">mkdir</span><span 
class="pcrb7t-">&#x00A0;d</span>
<br class="fancyvrb" /><a 
 id="x9-102017r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;copy</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;b</span><span 
class="pcrb7t-">&#x00A0;d</span>
<br class="fancyvrb" /><a 
 id="x9-102019r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">ls</span><span 
class="pcrb7t-">&#x00A0;d</span>
<br class="fancyvrb" /><a 
 id="x9-102021r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;a</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;b</span>
   </div>
<!--l. 265--><p class="noindent" >Copying a directory is recursive, and preserves the directory structure of the source.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-102023r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;copy</span><span 
class="pcrb7t-">&#x00A0;c</span><span 
class="pcrb7t-">&#x00A0;e</span>
<br class="fancyvrb" /><a 
 id="x9-102025r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;copying</span><span 
class="pcrr7tn-">&#x00A0;c/a/c</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;e/a/c</span>
   </div>
<!--l. 268--><p class="noindent" >If the source and destination are both directories, the source tree is recreated in the destination directory.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-102027r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;copy</span><span 
class="pcrb7t-">&#x00A0;c</span><span 
class="pcrb7t-">&#x00A0;d</span>
<br class="fancyvrb" /><a 
 id="x9-102029r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;copying</span><span 
class="pcrr7tn-">&#x00A0;c/a/c</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;d/c/a/c</span>
   </div>
<!--l. 272--><p class="indent" >   As with the <a 
 id="dx9-102030"></a>&#x201C;<span 
class="pcrr7tn-">hg rename</span>&#x201D; command, if you copy a file manually and then want Mercurial to know that you&#x2019;ve copied the
file, simply use the <a 
 id="dx9-102031"></a><span 
class="pcrr7tn-">--after </span>option to <a 
 id="dx9-102032"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D;.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-102034r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cp</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;z</span>
<br class="fancyvrb" /><a 
 id="x9-102036r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;copy</span><span 
class="pcrb7t-">&#x00A0;--after</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;z</span>
   </div>
<!--l. 277--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5.4    </span> <a 
 id="x9-1030005.4"></a>Renaming files</h3>
                                                                                         
                                                                                         
<!--l. 279--><p class="noindent" >It&#x2019;s rather more common to need to rename a file than to make a copy of it. The reason I discussed the <a 
 id="dx9-103001"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D; command
before talking about renaming files is that Mercurial treats a rename in essentially the same way as a copy.
Therefore, knowing what Mercurial does when you copy a file tells you what to expect when you rename a
file.
</p><!--l. 285--><p class="indent" >   When you use the <a 
 id="dx9-103002"></a>&#x201C;<span 
class="pcrr7tn-">hg rename</span>&#x201D; command, Mercurial makes a copy of each source file, then deletes it and marks the file as
removed.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-103004r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;rename</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;b</span>
   </div>
<!--l. 288--><p class="noindent" >The <a 
 id="dx9-103005"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D; command shows the newly copied file as added, and the copied-from file as removed.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-103007r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
<br class="fancyvrb" /><a 
 id="x9-103009r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-103011r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;R</span><span 
class="pcrr7tn-">&#x00A0;a</span>
   </div>
<!--l. 291--><p class="noindent" >As with the results of a <a 
 id="dx9-103012"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D;, we must use the <a 
 id="dx9-103013"></a><span 
class="pcrr7tn-">-C </span>option to <a 
 id="dx9-103014"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D; to see that the added file is really being tracked by
Mercurial as a copy of the original, now removed, file.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-103016r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;-C</span>
<br class="fancyvrb" /><a 
 id="x9-103018r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-103020r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-103022r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;R</span><span 
class="pcrr7tn-">&#x00A0;a</span>
   </div>
<!--l. 297--><p class="indent" >   As with <a 
 id="dx9-103023"></a>&#x201C;<span 
class="pcrr7tn-">hg remove</span>&#x201D; and <a 
 id="dx9-103024"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D;, you can tell Mercurial about a rename after the fact using the <a 
 id="dx9-103025"></a><span 
class="pcrr7tn-">--after </span>option. In
most other respects, the behaviour of the <a 
 id="dx9-103026"></a>&#x201C;<span 
class="pcrr7tn-">hg rename</span>&#x201D; command, and the options it accepts, are similar to the <a 
 id="dx9-103027"></a>&#x201C;<span 
class="pcrr7tn-">hg copy</span>&#x201D;
command.
</p><!--l. 302--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.4.1    </span> <a 
 id="x9-1040005.4.1"></a>Renaming files and merging changes</h4>
<!--l. 304--><p class="noindent" >Since Mercurial&#x2019;s rename is implemented as copy-and-remove, the same propagation of changes happens when you merge after
a rename as after a copy.
</p><!--l. 308--><p class="indent" >   If I modify a file, and you rename it to a new name, and then we merge our respective changes, my modifications to the file
under its original name will be propagated into the file under its new name. (This is something you might expect to &#x201C;simply
work,&#x201D; but not all revision control systems actually do this.)
</p><!--l. 314--><p class="indent" >   Whereas having changes follow a copy is a feature where you can perhaps nod and say &#x201C;yes, that might be useful,&#x201D; it should
be clear that having them follow a rename is definitely important. Without this facility, it would simply be too easy for changes
to become orphaned when files are renamed.
</p><!--l. 320--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.4.2    </span> <a 
 id="x9-1050005.4.2"></a>Divergent renames and merging</h4>
                                                                                         
                                                                                         
<!--l. 322--><p class="noindent" >The case of diverging names occurs when two developers start with a file&#x2014;let&#x2019;s call it <span 
class="pcrr7tn-">foo</span>&#x2014;in their respective
repositories.
</p><!--l. 326--><p class="indent" >
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-105002r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;clone</span><span 
class="pcrb7t-">&#x00A0;orig</span><span 
class="pcrb7t-">&#x00A0;anne</span>
<br class="fancyvrb" /><a 
 id="x9-105004r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;updated,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;merged,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;removed,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;unresolved</span>
<br class="fancyvrb" /><a 
 id="x9-105006r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;clone</span><span 
class="pcrb7t-">&#x00A0;orig</span><span 
class="pcrb7t-">&#x00A0;bob</span>
<br class="fancyvrb" /><a 
 id="x9-105008r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;updated,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;merged,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;removed,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;unresolved</span>
   </div>
<!--l. 327--><p class="noindent" >Anne renames the file to <span 
class="pcrr7tn-">bar</span>.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-105010r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;anne</span>
<br class="fancyvrb" /><a 
 id="x9-105012r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;mv</span><span 
class="pcrb7t-">&#x00A0;foo</span><span 
class="pcrb7t-">&#x00A0;bar</span>
<br class="fancyvrb" /><a 
 id="x9-105014r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;ci</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Rename</span><span 
class="pcrb7t-">&#x00A0;foo</span><span 
class="pcrb7t-">&#x00A0;to</span><span 
class="pcrb7t-">&#x00A0;bar'</span>
   </div>
<!--l. 329--><p class="noindent" >Meanwhile, Bob renames it to <span 
class="pcrr7tn-">quux</span>.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-105016r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;../bob</span>
<br class="fancyvrb" /><a 
 id="x9-105018r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;mv</span><span 
class="pcrb7t-">&#x00A0;foo</span><span 
class="pcrb7t-">&#x00A0;quux</span>
<br class="fancyvrb" /><a 
 id="x9-105020r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;ci</span><span 
class="pcrb7t-">&#x00A0;-m</span><span 
class="pcrb7t-">&#x00A0;'Rename</span><span 
class="pcrb7t-">&#x00A0;foo</span><span 
class="pcrb7t-">&#x00A0;to</span><span 
class="pcrb7t-">&#x00A0;quux'</span>
   </div>
<!--l. 332--><p class="indent" >   I like to think of this as a conflict because each developer has expressed different intentions about what the file ought to be
named.
</p><!--l. 335--><p class="indent" >   What do you think should happen when they merge their work? Mercurial&#x2019;s actual behaviour is that it always preserves <span 
class="ptmri7t-">both</span>
names when it merges changesets that contain divergent renames.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-105022r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;#</span><span 
class="pcrr7tn-">&#x00A0;See</span><span 
class="pcrr7tn-">&#x00A0;http://www.selenic.com/mercurial/bts/issue455</span>
<br class="fancyvrb" /><a 
 id="x9-105024r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;../orig</span>
<br class="fancyvrb" /><a 
 id="x9-105026r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;pull</span><span 
class="pcrb7t-">&#x00A0;-u</span><span 
class="pcrb7t-">&#x00A0;../anne</span>
<br class="fancyvrb" /><a 
 id="x9-105028r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;pulling</span><span 
class="pcrr7tn-">&#x00A0;from</span><span 
class="pcrr7tn-">&#x00A0;../anne</span>
<br class="fancyvrb" /><a 
 id="x9-105030r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;searching</span><span 
class="pcrr7tn-">&#x00A0;for</span><span 
class="pcrr7tn-">&#x00A0;changes</span>
<br class="fancyvrb" /><a 
 id="x9-105032r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;changesets</span>
<br class="fancyvrb" /><a 
 id="x9-105034r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;manifests</span>
<br class="fancyvrb" /><a 
 id="x9-105036r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;file</span><span 
class="pcrr7tn-">&#x00A0;changes</span>
<br class="fancyvrb" /><a 
 id="x9-105038r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;added</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;changesets</span><span 
class="pcrr7tn-">&#x00A0;with</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;changes</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span>
<br class="fancyvrb" /><a 
 id="x9-105040r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;updated,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;merged,</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;removed,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;unresolved</span>
<br class="fancyvrb" /><a 
 id="x9-105042r11"></a><span 
class="ptmr7t-x-x-50">11</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;pull</span><span 
class="pcrb7t-">&#x00A0;../bob</span>
<br class="fancyvrb" /><a 
 id="x9-105044r12"></a><span 
class="ptmr7t-x-x-50">12</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;pulling</span><span 
class="pcrr7tn-">&#x00A0;from</span><span 
class="pcrr7tn-">&#x00A0;../bob</span>
<br class="fancyvrb" /><a 
 id="x9-105046r13"></a><span 
class="ptmr7t-x-x-50">13</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;searching</span><span 
class="pcrr7tn-">&#x00A0;for</span><span 
class="pcrr7tn-">&#x00A0;changes</span>
<br class="fancyvrb" /><a 
 id="x9-105048r14"></a><span 
class="ptmr7t-x-x-50">14</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;changesets</span>
<br class="fancyvrb" /><a 
 id="x9-105050r15"></a><span 
class="ptmr7t-x-x-50">15</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;manifests</span>
<br class="fancyvrb" /><a 
 id="x9-105052r16"></a><span 
class="ptmr7t-x-x-50">16</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;file</span><span 
class="pcrr7tn-">&#x00A0;changes</span>
<br class="fancyvrb" /><a 
 id="x9-105054r17"></a><span 
class="ptmr7t-x-x-50">17</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;added</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;changesets</span><span 
class="pcrr7tn-">&#x00A0;with</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;changes</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;(+1</span><span 
class="pcrr7tn-">&#x00A0;heads)</span>
<br class="fancyvrb" /><a 
 id="x9-105056r18"></a><span 
class="ptmr7t-x-x-50">18</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;(run</span><span 
class="pcrr7tn-">&#x00A0;'hg</span><span 
class="pcrr7tn-">&#x00A0;heads'</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;see</span><span 
class="pcrr7tn-">&#x00A0;heads,</span><span 
class="pcrr7tn-">&#x00A0;'hg</span><span 
class="pcrr7tn-">&#x00A0;merge'</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;merge)</span>
                                                                                         
                                                                                         
<br class="fancyvrb" /><a 
 id="x9-105058r19"></a><span 
class="ptmr7t-x-x-50">19</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;merge</span>
<br class="fancyvrb" /><a 
 id="x9-105060r20"></a><span 
class="ptmr7t-x-x-50">20</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;warning:</span><span 
class="pcrr7tn-">&#x00A0;detected</span><span 
class="pcrr7tn-">&#x00A0;divergent</span><span 
class="pcrr7tn-">&#x00A0;renames</span><span 
class="pcrr7tn-">&#x00A0;of</span><span 
class="pcrr7tn-">&#x00A0;foo</span><span 
class="pcrr7tn-">&#x00A0;to:</span>
<br class="fancyvrb" /><a 
 id="x9-105062r21"></a><span 
class="ptmr7t-x-x-50">21</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;bar</span>
<br class="fancyvrb" /><a 
 id="x9-105064r22"></a><span 
class="ptmr7t-x-x-50">22</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;quux</span>
<br class="fancyvrb" /><a 
 id="x9-105066r23"></a><span 
class="ptmr7t-x-x-50">23</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;updated,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;merged,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;removed,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;unresolved</span>
<br class="fancyvrb" /><a 
 id="x9-105068r24"></a><span 
class="ptmr7t-x-x-50">24</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;(branch</span><span 
class="pcrr7tn-">&#x00A0;merge,</span><span 
class="pcrr7tn-">&#x00A0;don't</span><span 
class="pcrr7tn-">&#x00A0;forget</span><span 
class="pcrr7tn-">&#x00A0;to</span><span 
class="pcrr7tn-">&#x00A0;commit)</span>
<br class="fancyvrb" /><a 
 id="x9-105070r25"></a><span 
class="ptmr7t-x-x-50">25</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">ls</span>
<br class="fancyvrb" /><a 
 id="x9-105072r26"></a><span 
class="ptmr7t-x-x-50">26</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;bar</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;quux</span>
   </div>
<!--l. 340--><p class="indent" >   Notice that Mercurial does warn about the divergent renames, but it leaves it up to you to do something about the
divergence after the merge.
</p><!--l. 343--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.4.3    </span> <a 
 id="x9-1060005.4.3"></a>Convergent renames and merging</h4>
<!--l. 345--><p class="noindent" >Another kind of rename conflict occurs when two people choose to rename different <span 
class="ptmri7t-">source </span>files to the same <span 
class="ptmri7t-">destination</span>. In this
case, Mercurial runs its normal merge machinery, and lets you guide it to a suitable resolution.
</p><!--l. 350--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">5.4.4    </span> <a 
 id="x9-1070005.4.4"></a>Other name-related corner cases</h4>
<!--l. 352--><p class="noindent" >Mercurial has a longstanding bug in which it fails to handle a merge where one side has a file with a given name, while another
has a directory with the same name. This is documented as&#x00A0;<a 
 id="dx9-107001"></a><a 
href="http://www.selenic.com/mercurial/bts/issue29" >Mercurial bug no.&#x00A0;29</a>.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x9-107003r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;init</span><span 
class="pcrb7t-">&#x00A0;issue29</span>
<br class="fancyvrb" /><a 
 id="x9-107005r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;issue29</span>
<br class="fancyvrb" /><a 
 id="x9-107007r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;a</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-107009r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;ci</span><span 
class="pcrb7t-">&#x00A0;-Ama</span>
<br class="fancyvrb" /><a 
 id="x9-107011r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;a</span>
<br class="fancyvrb" /><a 
 id="x9-107013r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;b</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-107015r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;ci</span><span 
class="pcrb7t-">&#x00A0;-Amb</span>
<br class="fancyvrb" /><a 
 id="x9-107017r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-107019r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;up</span><span 
class="pcrb7t-">&#x00A0;0</span>
<br class="fancyvrb" /><a 
 id="x9-107021r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;updated,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;merged,</span><span 
class="pcrr7tn-">&#x00A0;1</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;removed,</span><span 
class="pcrr7tn-">&#x00A0;0</span><span 
class="pcrr7tn-">&#x00A0;files</span><span 
class="pcrr7tn-">&#x00A0;unresolved</span>
<br class="fancyvrb" /><a 
 id="x9-107023r11"></a><span 
class="ptmr7t-x-x-50">11</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">mkdir</span><span 
class="pcrb7t-">&#x00A0;b</span>
<br class="fancyvrb" /><a 
 id="x9-107025r12"></a><span 
class="ptmr7t-x-x-50">12</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">echo</span><span 
class="pcrb7t-">&#x00A0;b</span><span 
class="pcrb7t-">&#x00A0;&#x003e;</span><span 
class="pcrb7t-">&#x00A0;b/b</span>
<br class="fancyvrb" /><a 
 id="x9-107027r13"></a><span 
class="ptmr7t-x-x-50">13</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;ci</span><span 
class="pcrb7t-">&#x00A0;-Amc</span>
<br class="fancyvrb" /><a 
 id="x9-107029r14"></a><span 
class="ptmr7t-x-x-50">14</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;b/b</span>
<br class="fancyvrb" /><a 
 id="x9-107031r15"></a><span 
class="ptmr7t-x-x-50">15</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;merge</span>
<br class="fancyvrb" /><a 
 id="x9-107033r16"></a><span 
class="ptmr7t-x-x-50">16</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;abort:</span><span 
class="pcrr7tn-">&#x00A0;Is</span><span 
class="pcrr7tn-">&#x00A0;a</span><span 
class="pcrr7tn-">&#x00A0;directory:</span><span 
class="pcrr7tn-">&#x00A0;/tmp/issue2968OqIY/issue29/b</span>
   </div>
<!--l. 357--><p class="noindent" >
</p>
                                                                                         
                                                                                         
   <h3 class="sectionHead"><span class="titlemark">5.5    </span> <a 
 id="x9-1080005.5"></a>Recovering from mistakes</h3>
<!--l. 359--><p class="noindent" >Mercurial has some useful commands that will help you to recover from some common mistakes.
</p><!--l. 362--><p class="indent" >   The <a 
 id="dx9-108001"></a>&#x201C;<span 
class="pcrr7tn-">hg revert</span>&#x201D; command lets you undo changes that you have made to your working directory. For example, if you <a 
 id="dx9-108002"></a>&#x201C;<span 
class="pcrr7tn-">hg</span>
<span 
class="pcrr7tn-">add</span>&#x201D; a file by accident, just run <a 
 id="dx9-108003"></a>&#x201C;<span 
class="pcrr7tn-">hg revert</span>&#x201D; with the name of the file you added, and while the file won&#x2019;t be touched in any
way, it won&#x2019;t be tracked for adding by Mercurial any longer, either. You can also use <a 
 id="dx9-108004"></a>&#x201C;<span 
class="pcrr7tn-">hg revert</span>&#x201D; to get rid of erroneous
changes to a file.
</p><!--l. 369--><p class="indent" >   It&#x2019;s useful to remember that the <a 
 id="dx9-108005"></a>&#x201C;<span 
class="pcrr7tn-">hg revert</span>&#x201D; command is useful for changes that you have not yet committed. Once you&#x2019;ve
committed a change, if you decide it was a mistake, you can still do something about it, though your options may be more
limited.
</p><!--l. 374--><p class="indent" >   For more information about the <a 
 id="dx9-108006"></a>&#x201C;<span 
class="pcrr7tn-">hg revert</span>&#x201D; command, and details about how to deal with changes you have already
committed, see chapter&#x00A0;<a 
href="hgbookch9.html#x13-1690009">9<!--tex4ht:ref: chap:undo --></a>.
                                                                                         
                                                                                         
                                                                                         
                                                                                         
                                                                                         
                                                                                         
</p>
   <!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="hgbookch6.html" >next</a>] [<a 
href="hgbookch4.html" >prev</a>] [<a 
href="hgbookch4.html#tailhgbookch4.html" >prev-tail</a>] [<a 
href="hgbookch5.html" >front</a>] [<a 
href="hgbook.html#hgbookch5.html" >up</a>] </p></div>
<!--l. 1--><p class="indent" >   <a 
 id="tailhgbookch5.html"></a>  </p> 
</body></html> 
