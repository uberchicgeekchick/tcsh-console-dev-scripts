<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<!--http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd-->  
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>7 File names and pattern matching</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<!-- html4-uni,2,html,xhtml --> 
<meta name="src" content="hgbook.tex" /> 
<meta name="date" content="2007-12-14 11:09:00" /> 
<link rel="stylesheet" type="text/css" href="hgbook.css" /> 
</head><body 
>
   <!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="hgbookch8.html" >next</a>] [<a 
href="hgbookch6.html" >prev</a>] [<a 
href="hgbookch6.html#tailhgbookch6.html" >prev-tail</a>] [<a 
href="#tailhgbookch7.html">tail</a>] [<a 
href="hgbook.html#hgbookch7.html" >up</a>] </p></div>
   <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;7</span><br /><a 
 id="x11-1430007"></a>File names and pattern matching</h2>
<!--l. 4--><p class="noindent" >Mercurial provides mechanisms that let you work with file names in a consistent and expressive way.
</p>
   <h3 class="sectionHead"><span class="titlemark">7.1    </span> <a 
 id="x11-1440007.1"></a>Simple file naming</h3>
<!--l. 9--><p class="noindent" >Mercurial uses a unified piece of machinery &#x201C;under the hood&#x201D; to handle file names. Every command behaves uniformly with
respect to file names. The way in which commands work with file names is as follows.
</p><!--l. 14--><p class="indent" >   If you explicitly name real files on the command line, Mercurial works with exactly those files, as you would
expect.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-144002r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;COPYING</span><span 
class="pcrb7t-">&#x00A0;README</span><span 
class="pcrb7t-">&#x00A0;examples/simple.py</span>
   </div>
<!--l. 18--><p class="indent" >   When you provide a directory name, Mercurial will interpret this as &#x201C;operate on every file in this directory and its
subdirectories&#x201D;. Mercurial traverses the files and subdirectories in a directory in alphabetical order. When it encounters a
subdirectory, it will traverse that subdirectory before continuing with the current directory.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-144004r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;src</span>
<br class="fancyvrb" /><a 
 id="x11-144006r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/main.py</span>
<br class="fancyvrb" /><a 
 id="x11-144008r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/watcher/_watcher.c</span>
<br class="fancyvrb" /><a 
 id="x11-144010r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/watcher/watcher.py</span>
<br class="fancyvrb" /><a 
 id="x11-144012r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/xyzzy.txt</span>
   </div>
<!--l. 26--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">7.2    </span> <a 
 id="x11-1450007.2"></a>Running commands without any file names</h3>
<!--l. 28--><p class="noindent" >Mercurial&#x2019;s commands that work with file names have useful default behaviours when you invoke them without providing any
file names or patterns. What kind of behaviour you should expect depends on what the command does. Here are a few rules
of thumb you can use to predict what a command is likely to do if you don&#x2019;t give it any names to work with.
</p>
     <ul><li><span class="dt">
     </span><span class="dd">Most commands will operate on the entire working directory. This is what the <a 
 id="dx11-145001"></a>&#x201C;<span 
class="pcrr7tn-">hg add</span>&#x201D; command does, for
     example.
     </span><li><span class="dt">
     </span><span class="dd">If the command has effects that are difficult or impossible to reverse, it will force you to explicitly provide at least
     one name or pattern (see below). This protects you from accidentally deleting files by running <a 
 id="dx11-145002"></a>&#x201C;<span 
class="pcrr7tn-">hg remove</span>&#x201D;
     with no arguments, for example.</li></ul>
<!--l. 44--><p class="indent" >   It&#x2019;s easy to work around these default behaviours if they don&#x2019;t suit you. If a command normally operates on the whole
working directory, you can invoke it on just the current directory and its subdirectories by giving it the name
&#x201C;<span 
class="pcrr7tn-">.</span>&#x201D;.
                                                                                         
                                                                                         
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-145004r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;src</span>
<br class="fancyvrb" /><a 
 id="x11-145006r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;-n</span>
<br class="fancyvrb" /><a 
 id="x11-145008r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;../MANIFEST.in</span>
<br class="fancyvrb" /><a 
 id="x11-145010r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;../examples/performant.py</span>
<br class="fancyvrb" /><a 
 id="x11-145012r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;../setup.py</span>
<br class="fancyvrb" /><a 
 id="x11-145014r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;main.py</span>
<br class="fancyvrb" /><a 
 id="x11-145016r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;watcher/_watcher.c</span>
<br class="fancyvrb" /><a 
 id="x11-145018r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;watcher/watcher.py</span>
<br class="fancyvrb" /><a 
 id="x11-145020r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;xyzzy.txt</span>
<br class="fancyvrb" /><a 
 id="x11-145022r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;-n</span><span 
class="pcrb7t-">&#x00A0;.</span>
<br class="fancyvrb" /><a 
 id="x11-145024r11"></a><span 
class="ptmr7t-x-x-50">11</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;main.py</span>
<br class="fancyvrb" /><a 
 id="x11-145026r12"></a><span 
class="ptmr7t-x-x-50">12</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;watcher/_watcher.c</span>
<br class="fancyvrb" /><a 
 id="x11-145028r13"></a><span 
class="ptmr7t-x-x-50">13</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;watcher/watcher.py</span>
<br class="fancyvrb" /><a 
 id="x11-145030r14"></a><span 
class="ptmr7t-x-x-50">14</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;xyzzy.txt</span>
   </div>
<!--l. 50--><p class="indent" >   Along the same lines, some commands normally print file names relative to the root of the repository, even if you&#x2019;re
invoking them from a subdirectory. Such a command will print file names relative to your subdirectory if you give it
explicit names. Here, we&#x2019;re going to run <a 
 id="dx11-145031"></a>&#x201C;<span 
class="pcrr7tn-">hg status</span>&#x201D; from a subdirectory, and get it to operate on the entire
working directory while printing file names relative to our subdirectory, by passing it the output of the <a 
 id="dx11-145032"></a>&#x201C;<span 
class="pcrr7tn-">hg root</span>&#x201D;
command.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-145034r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span>
<br class="fancyvrb" /><a 
 id="x11-145036r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;COPYING</span>
<br class="fancyvrb" /><a 
 id="x11-145038r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;README</span>
<br class="fancyvrb" /><a 
 id="x11-145040r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;examples/simple.py</span>
<br class="fancyvrb" /><a 
 id="x11-145042r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;MANIFEST.in</span>
<br class="fancyvrb" /><a 
 id="x11-145044r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;examples/performant.py</span>
<br class="fancyvrb" /><a 
 id="x11-145046r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;setup.py</span>
<br class="fancyvrb" /><a 
 id="x11-145048r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/main.py</span>
<br class="fancyvrb" /><a 
 id="x11-145050r9"></a><span 
class="ptmr7t-x-x-50">9</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/watcher/_watcher.c</span>
<br class="fancyvrb" /><a 
 id="x11-145052r10"></a><span 
class="ptmr7t-x-x-50">10</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/watcher/watcher.py</span>
<br class="fancyvrb" /><a 
 id="x11-145054r11"></a><span 
class="ptmr7t-x-x-50">11</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/xyzzy.txt</span>
<br class="fancyvrb" /><a 
 id="x11-145056r12"></a><span 
class="ptmr7t-x-x-50">12</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;&#x2018;hg</span><span 
class="pcrb7t-">&#x00A0;root&#x2018;</span>
<br class="fancyvrb" /><a 
 id="x11-145058r13"></a><span 
class="ptmr7t-x-x-50">13</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;../COPYING</span>
<br class="fancyvrb" /><a 
 id="x11-145060r14"></a><span 
class="ptmr7t-x-x-50">14</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;../README</span>
<br class="fancyvrb" /><a 
 id="x11-145062r15"></a><span 
class="ptmr7t-x-x-50">15</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;../examples/simple.py</span>
<br class="fancyvrb" /><a 
 id="x11-145064r16"></a><span 
class="ptmr7t-x-x-50">16</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;../MANIFEST.in</span>
<br class="fancyvrb" /><a 
 id="x11-145066r17"></a><span 
class="ptmr7t-x-x-50">17</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;../examples/performant.py</span>
<br class="fancyvrb" /><a 
 id="x11-145068r18"></a><span 
class="ptmr7t-x-x-50">18</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;../setup.py</span>
<br class="fancyvrb" /><a 
 id="x11-145070r19"></a><span 
class="ptmr7t-x-x-50">19</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;main.py</span>
<br class="fancyvrb" /><a 
 id="x11-145072r20"></a><span 
class="ptmr7t-x-x-50">20</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;watcher/_watcher.c</span>
<br class="fancyvrb" /><a 
 id="x11-145074r21"></a><span 
class="ptmr7t-x-x-50">21</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;watcher/watcher.py</span>
<br class="fancyvrb" /><a 
 id="x11-145076r22"></a><span 
class="ptmr7t-x-x-50">22</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;xyzzy.txt</span>
   </div>
<!--l. 59--><p class="noindent" >
                                                                                         
                                                                                         
</p>
   <h3 class="sectionHead"><span class="titlemark">7.3    </span> <a 
 id="x11-1460007.3"></a>Telling you what&#x2019;s going on</h3>
<!--l. 61--><p class="noindent" >The <a 
 id="dx11-146001"></a>&#x201C;<span 
class="pcrr7tn-">hg add</span>&#x201D; example in the preceding section illustrates something else that&#x2019;s helpful about Mercurial commands. If a
command operates on a file that you didn&#x2019;t name explicitly on the command line, it will usually print the name of the file, so
that you will not be surprised what&#x2019;s going on.
</p><!--l. 67--><p class="indent" >   The principle here is of <span 
class="ptmri7t-">least surprise</span>. If you&#x2019;ve exactly named a file on the command line, there&#x2019;s no point in repeating it
back at you. If Mercurial is acting on a file <span 
class="ptmri7t-">implicitly</span>, because you provided no names, or a directory, or a pattern (see below),
it&#x2019;s safest to tell you what it&#x2019;s doing.
</p><!--l. 73--><p class="indent" >   For commands that behave this way, you can silence them using the <a 
 id="dx11-146002"></a><span 
class="pcrr7tn-">-q </span>option. You can also get them to print the name of
every file, even those you&#x2019;ve named explicitly, using the <a 
 id="dx11-146003"></a><span 
class="pcrr7tn-">-v </span>option.
</p><!--l. 78--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">7.4    </span> <a 
 id="x11-1470007.4"></a>Using patterns to identify files</h3>
<!--l. 80--><p class="noindent" >In addition to working with file and directory names, Mercurial lets you use <span 
class="ptmri7t-">patterns </span>to identify files. Mercurial&#x2019;s pattern
handling is expressive.
</p><!--l. 84--><p class="indent" >   On Unix-like systems (Linux, MacOS, etc.), the job of matching file names to patterns normally falls to
the shell. On these systems, you must explicitly tell Mercurial that a name is a pattern. On Windows, the shell
does not expand patterns, so Mercurial will automatically identify names that are patterns, and expand them for
you.
</p><!--l. 90--><p class="indent" >   To provide a pattern in place of a regular name on the command line, the mechanism is simple:
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-147002r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;syntax:patternbody</span>
   </div>
<!--l. 95--><p class="noindent" >That is, a pattern is identified by a short text string that says what kind of pattern this is, followed by a colon, followed by the actual
pattern.
</p><!--l. 99--><p class="indent" >   Mercurial supports two kinds of pattern syntax. The most frequently used is called <span 
class="pcrr7tn-">glob</span>; this is the same
kind of pattern matching used by the Unix shell, and should be familiar to Windows command prompt users,
too.
</p><!--l. 104--><p class="indent" >   When Mercurial does automatic pattern matching on Windows, it uses <span 
class="pcrr7tn-">glob </span>syntax. You can thus omit the &#x201C;<span 
class="pcrr7tn-">glob:</span>&#x201D; prefix
on Windows, but it&#x2019;s safe to use it, too.
</p><!--l. 108--><p class="indent" >   The <span 
class="pcrr7tn-">re </span>syntax is more powerful; it lets you specify patterns using regular expressions, also known as regexps.
</p><!--l. 111--><p class="indent" >   By the way, in the examples that follow, notice that I&#x2019;m careful to wrap all of my patterns in quote characters, so that they
won&#x2019;t get expanded by the shell before Mercurial sees them.
</p><!--l. 115--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">7.4.1    </span> <a 
 id="x11-1480007.4.1"></a>Shell-style <span 
class="pcrr7tn-">glob </span>patterns</h4>
<!--l. 117--><p class="noindent" >This is an overview of the kinds of patterns you can use when you&#x2019;re matching on glob patterns.
</p><!--l. 120--><p class="indent" >   The &#x201C;<span 
class="pcrr7tn-">&#x22C6;</span>&#x201D; character matches any string, within a single directory.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-148002r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;add</span><span 
class="pcrb7t-">&#x00A0;'glob:&#x22C6;.py'</span>
<br class="fancyvrb" /><a 
 id="x11-148004r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;adding</span><span 
class="pcrr7tn-">&#x00A0;main.py</span>
   </div>
                                                                                         
                                                                                         
<!--l. 124--><p class="indent" >   The &#x201C;<span 
class="pcrr7tn-">&#x22C6;&#x22C6;</span>&#x201D; pattern matches any string, and crosses directory boundaries. It&#x2019;s not a standard Unix glob token, but it&#x2019;s accepted
by several popular Unix shells, and is very useful.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-148006r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">cd</span><span 
class="pcrb7t-">&#x00A0;..</span>
<br class="fancyvrb" /><a 
 id="x11-148008r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;'glob:&#x22C6;&#x22C6;.py'</span>
<br class="fancyvrb" /><a 
 id="x11-148010r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;examples/simple.py</span>
<br class="fancyvrb" /><a 
 id="x11-148012r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;src/main.py</span>
<br class="fancyvrb" /><a 
 id="x11-148014r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;examples/performant.py</span>
<br class="fancyvrb" /><a 
 id="x11-148016r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;setup.py</span>
<br class="fancyvrb" /><a 
 id="x11-148018r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/watcher/watcher.py</span>
   </div>
<!--l. 129--><p class="indent" >   The &#x201C;<span 
class="pcrr7tn-">?</span>&#x201D; pattern matches any single character.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-148020r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;'glob:&#x22C6;&#x22C6;.?'</span>
<br class="fancyvrb" /><a 
 id="x11-148022r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/watcher/_watcher.c</span>
   </div>
<!--l. 132--><p class="indent" >   The &#x201C;<span 
class="pcrr7tn-">[</span>&#x201D; character begins a <span 
class="ptmri7t-">character class</span>. This matches any single character within the class. The class ends with a &#x201C;<span 
class="pcrr7tn-">]</span>&#x201D;
character. A class may contain multiple <span 
class="ptmri7t-">range</span>s of the form &#x201C;<span 
class="pcrr7tn-">a-f</span>&#x201D;, which is shorthand for &#x201C;<span 
class="pcrr7tn-">abcdef</span>&#x201D;.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-148024r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;'glob:&#x22C6;&#x22C6;[nr-t]'</span>
<br class="fancyvrb" /><a 
 id="x11-148026r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;MANIFEST.in</span>
<br class="fancyvrb" /><a 
 id="x11-148028r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/xyzzy.txt</span>
   </div>
<!--l. 138--><p class="noindent" >If the first character after the &#x201C;<span 
class="pcrr7tn-">[</span>&#x201D; in a character class is a &#x201C;<span 
class="pcrr7tn-">!</span>&#x201D;, it <span 
class="ptmri7t-">negates </span>the class, making it match any single character not in the
class.
</p><!--l. 142--><p class="indent" >   A &#x201C;<span 
class="cmsy-10">{</span>&#x201D; begins a group of subpatterns, where the whole group matches if any subpattern in the group matches. The &#x201C;<span 
class="pcrr7tn-">,</span>&#x201D;
character separates subpatterns, and &#x201C;<span 
class="cmsy-10">}</span>&#x201D; ends the group.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-148030r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;'glob:&#x22C6;.</span><span 
class="cmsy-10">{</span><span 
class="pcrb7t-">in,py</span><span 
class="cmsy-10">}</span><span 
class="pcrb7t-">'</span>
<br class="fancyvrb" /><a 
 id="x11-148032r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;MANIFEST.in</span>
<br class="fancyvrb" /><a 
 id="x11-148034r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;setup.py</span>
   </div>
<!--l. 147--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><a 
 id="x11-1490007.4.1"></a>Watch out!</h5>
<!--l. 149--><p class="noindent" >Don&#x2019;t forget that if you want to match a pattern in any directory, you should not be using the &#x201C;<span 
class="pcrr7tn-">&#x22C6;</span>&#x201D; match-any token, as this will
only match within one directory. Instead, use the &#x201C;<span 
class="pcrr7tn-">&#x22C6;&#x22C6;</span>&#x201D; token. This small example illustrates the difference between the
two.
</p>
   <div class="fancyvrb" id="fancyvrb">
                                                                                         
                                                                                         
<a 
 id="x11-149002r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;'glob:&#x22C6;.py'</span>
<br class="fancyvrb" /><a 
 id="x11-149004r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;setup.py</span>
<br class="fancyvrb" /><a 
 id="x11-149006r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;'glob:&#x22C6;&#x22C6;.py'</span>
<br class="fancyvrb" /><a 
 id="x11-149008r4"></a><span 
class="ptmr7t-x-x-50">4</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;examples/simple.py</span>
<br class="fancyvrb" /><a 
 id="x11-149010r5"></a><span 
class="ptmr7t-x-x-50">5</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;A</span><span 
class="pcrr7tn-">&#x00A0;src/main.py</span>
<br class="fancyvrb" /><a 
 id="x11-149012r6"></a><span 
class="ptmr7t-x-x-50">6</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;examples/performant.py</span>
<br class="fancyvrb" /><a 
 id="x11-149014r7"></a><span 
class="ptmr7t-x-x-50">7</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;setup.py</span>
<br class="fancyvrb" /><a 
 id="x11-149016r8"></a><span 
class="ptmr7t-x-x-50">8</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/watcher/watcher.py</span>
   </div>
<!--l. 155--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">7.4.2    </span> <a 
 id="x11-1500007.4.2"></a>Regular expression matching with <span 
class="pcrr7tn-">re </span>patterns</h4>
<!--l. 157--><p class="noindent" >Mercurial accepts the same regular expression syntax as the Python programming language (it uses Python&#x2019;s regexp engine
internally). This is based on the Perl language&#x2019;s regexp syntax, which is the most popular dialect in use (it&#x2019;s also used in Java,
for example).
</p><!--l. 162--><p class="indent" >   I won&#x2019;t discuss Mercurial&#x2019;s regexp dialect in any detail here, as regexps are not often used. Perl-style regexps are in any
case already exhaustively documented on a multitude of web sites, and in many books. Instead, I will focus here on a few things
you should know if you find yourself needing to use regexps with Mercurial.
</p><!--l. 168--><p class="indent" >   A regexp is matched against an entire file name, relative to the root of the repository. In other words, even if
you&#x2019;re already in subbdirectory <span 
class="pcrr7tn-">foo</span>, if you want to match files under this directory, your pattern must start with
&#x201C;<span 
class="pcrr7tn-">foo/</span>&#x201D;.
</p><!--l. 173--><p class="indent" >   One thing to note, if you&#x2019;re familiar with Perl-style regexps, is that Mercurial&#x2019;s are <span 
class="ptmri7t-">rooted</span>. That is, a regexp starts matching
against the beginning of a string; it doesn&#x2019;t look for a match anywhere within the string. To match anywhere in a string, start
your pattern with &#x201C;<span 
class="pcrr7tn-">.&#x22C6;</span>&#x201D;.
</p><!--l. 179--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">7.5    </span> <a 
 id="x11-1510007.5"></a>Filtering files</h3>
<!--l. 181--><p class="noindent" >Not only does Mercurial give you a variety of ways to specify files; it lets you further winnow those files using <span 
class="ptmri7t-">filters</span>.
Commands that work with file names accept two filtering options. </p>
     <ul><li><span class="dt">
     </span><span class="dd"><a 
 id="dx11-151001"></a><span 
class="pcrr7tn-">-I</span>, or <a 
 id="dx11-151002"></a><span 
class="pcrr7tn-">--include</span>, lets you specify a pattern that file names must match in order to be processed.
     </span><li><span class="dt">
     </span><span class="dd"><a 
 id="dx11-151003"></a><span 
class="pcrr7tn-">-X</span>, or <a 
 id="dx11-151004"></a><span 
class="pcrr7tn-">--exclude</span>, gives you a way to <span 
class="ptmri7t-">avoid </span>processing files, if they match this pattern.</li></ul>
<!--l. 190--><p class="noindent" >You can provide multiple <a 
 id="dx11-151005"></a><span 
class="pcrr7tn-">-I </span>and <a 
 id="dx11-151006"></a><span 
class="pcrr7tn-">-X </span>options on the command line, and intermix them as you please. Mercurial interprets the
patterns you provide using glob syntax by default (but you can use regexps if you need to).
</p><!--l. 195--><p class="indent" >   You can read a <a 
 id="dx11-151007"></a><span 
class="pcrr7tn-">-I </span>filter as &#x201C;process only the files that match this filter&#x201D;.
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-151009r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;-I</span><span 
class="pcrb7t-">&#x00A0;'&#x22C6;.in'</span>
<br class="fancyvrb" /><a 
 id="x11-151011r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;MANIFEST.in</span>
   </div>
<!--l. 198--><p class="noindent" >The <a 
 id="dx11-151012"></a><span 
class="pcrr7tn-">-X </span>filter is best read as &#x201C;process only the files that don&#x2019;t match this pattern&#x201D;.
                                                                                         
                                                                                         
</p>
   <div class="fancyvrb" id="fancyvrb">
<a 
 id="x11-151014r1"></a><span 
class="ptmr7t-x-x-50">1</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;$</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrb7t-">hg</span><span 
class="pcrb7t-">&#x00A0;status</span><span 
class="pcrb7t-">&#x00A0;-X</span><span 
class="pcrb7t-">&#x00A0;'&#x22C6;&#x22C6;.py'</span><span 
class="pcrb7t-">&#x00A0;src</span>
<br class="fancyvrb" /><a 
 id="x11-151016r2"></a><span 
class="ptmr7t-x-x-50">2</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/watcher/_watcher.c</span>
<br class="fancyvrb" /><a 
 id="x11-151018r3"></a><span 
class="ptmr7t-x-x-50">3</span><span 
class="pcrr7tn-">&#x00A0;</span><span 
class="pcrr7tn-">&#x00A0;?</span><span 
class="pcrr7tn-">&#x00A0;src/xyzzy.txt</span>
   </div>
<!--l. 202--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">7.6    </span> <a 
 id="x11-1520007.6"></a>Ignoring unwanted files and directories</h3>
<!--l. 204--><p class="noindent" >XXX.
</p><!--l. 206--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">7.7    </span> <a 
 id="x11-1530007.7"></a>Case sensitivity</h3>
<!--l. 209--><p class="noindent" >If you&#x2019;re working in a mixed development environment that contains both Linux (or other Unix) systems and Macs or Windows
systems, you should keep in the back of your mind the knowledge that they treat the case (&#x201C;N&#x201D; versus &#x201C;n&#x201D;) of file names in
incompatible ways. This is not very likely to affect you, and it&#x2019;s easy to deal with if it does, but it could surprise you if you
don&#x2019;t know about it.
</p><!--l. 216--><p class="indent" >   Operating systems and filesystems differ in the way they handle the <span 
class="ptmri7t-">case </span>of characters in file and directory names. There are
three common ways to handle case in names. </p>
     <ul><li><span class="dt">
     </span><span class="dd">Completely case insensitive. Uppercase and lowercase versions of a letter are treated as identical, both when
     creating a file and during subsequent accesses. This is common on older DOS-based systems.
     </span><li><span class="dt">
     </span><span class="dd">Case preserving, but insensitive. When a file or directory is created, the case of its name is stored, and can be
     retrieved and displayed by the operating system. When an existing file is being looked up, its case is ignored.
     This is the standard arrangement on Windows and MacOS. The names <span 
class="pcrr7tn-">foo </span>and <span 
class="pcrr7tn-">FoO </span>identify the same file. This
     treatment of uppercase and lowercase letters as interchangeable is also referred to as <span 
class="ptmri7t-">case folding</span>.
     </span><li><span class="dt">
     </span><span class="dd">Case sensitive. The case of a name is significant at all times. The names <span 
class="pcrr7tn-">foo </span>and FoO identify different files.
     This is the way Linux and Unix systems normally work.</li></ul>
<!--l. 237--><p class="indent" >   On Unix-like systems, it is possible to have any or all of the above ways of handling case in action at once. For example, if
you use a USB thumb drive formatted with a FAT32 filesystem on a Linux system, Linux will handle names on that filesystem
in a case preserving, but insensitive, way.
</p><!--l. 243--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">7.7.1    </span> <a 
 id="x11-1540007.7.1"></a>Safe, portable repository storage</h4>
<!--l. 245--><p class="noindent" >Mercurial&#x2019;s repository storage mechanism is <span 
class="ptmri7t-">case safe</span>. It translates file names so that they can be safely stored on both case
sensitive and case insensitive filesystems. This means that you can use normal file copying tools to transfer a Mercurial
repository onto, for example, a USB thumb drive, and safely move that drive and repository back and forth between a Mac, a
PC running Windows, and a Linux box.
                                                                                         
                                                                                         
</p><!--l. 253--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">7.7.2    </span> <a 
 id="x11-1550007.7.2"></a>Detecting case conflicts</h4>
<!--l. 255--><p class="noindent" >When operating in the working directory, Mercurial honours the naming policy of the filesystem where the working directory is
located. If the filesystem is case preserving, but insensitive, Mercurial will treat names that differ only in case as the
same.
</p><!--l. 260--><p class="indent" >   An important aspect of this approach is that it is possible to commit a changeset on a case sensitive (typically Linux or
Unix) filesystem that will cause trouble for users on case insensitive (usually Windows and MacOS) users. If a Linux user
commits changes to two files, one named <span 
class="pcrr7tn-">myfile.c </span>and the other named <span 
class="pcrr7tn-">MyFile.C</span>, they will be stored correctly in the
repository. And in the working directories of other Linux users, they will be correctly represented as separate
files.
</p><!--l. 269--><p class="indent" >   If a Windows or Mac user pulls this change, they will not initially have a problem, because Mercurial&#x2019;s repository storage
mechanism is case safe. However, once they try to <a 
 id="dx11-155001"></a>&#x201C;<span 
class="pcrr7tn-">hg update</span>&#x201D; the working directory to that changeset, or <a 
 id="dx11-155002"></a>&#x201C;<span 
class="pcrr7tn-">hg merge</span>&#x201D; with
that changeset, Mercurial will spot the conflict between the two file names that the filesystem would treat as the same, and
forbid the update or merge from occurring.
</p><!--l. 277--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">7.7.3    </span> <a 
 id="x11-1560007.7.3"></a>Fixing a case conflict</h4>
<!--l. 279--><p class="noindent" >If you are using Windows or a Mac in a mixed environment where some of your collaborators are using Linux or Unix, and
Mercurial reports a case folding conflict when you try to <a 
 id="dx11-156001"></a>&#x201C;<span 
class="pcrr7tn-">hg update</span>&#x201D; or <a 
 id="dx11-156002"></a>&#x201C;<span 
class="pcrr7tn-">hg merge</span>&#x201D;, the procedure to fix the problem is
simple.
</p><!--l. 284--><p class="indent" >   Just find a nearby Linux or Unix box, clone the problem repository onto it, and use Mercurial&#x2019;s <a 
 id="dx11-156003"></a>&#x201C;<span 
class="pcrr7tn-">hg rename</span>&#x201D; command to
change the names of any offending files or directories so that they will no longer cause case folding conflicts. Commit this
change, <a 
 id="dx11-156004"></a>&#x201C;<span 
class="pcrr7tn-">hg pull</span>&#x201D; or <a 
 id="dx11-156005"></a>&#x201C;<span 
class="pcrr7tn-">hg push</span>&#x201D; it across to your Windows or MacOS system, and <a 
 id="dx11-156006"></a>&#x201C;<span 
class="pcrr7tn-">hg update</span>&#x201D; to the revision with the
non-conflicting names.
</p><!--l. 291--><p class="indent" >   The changeset with case-conflicting names will remain in your project&#x2019;s history, and you still won&#x2019;t be able to <a 
 id="dx11-156007"></a>&#x201C;<span 
class="pcrr7tn-">hg update</span>&#x201D;
your working directory to that changeset on a Windows or MacOS system, but you can continue development
unimpeded.
   <div class="fbox"></p><table class="minipage"><tr><td><span 
class="ptmb7t-">Note:  </span>Prior to version&#x00A0;0.9.3, Mercurial did not use a case safe repository storage
mechanism,  and  did  not  detect  case  folding  conflicts.  If  you  are  using  an  older
version  of  Mercurial  on  Windows  or  MacOS,  I  strongly  recommend  that  you
upgrade.                                                                                                                      </td></tr></table></div>
                                                                                         
                                                                                         
                                                                                         
                                                                                         
                                                                                         
                                                                                         
   <!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="hgbookch8.html" >next</a>] [<a 
href="hgbookch6.html" >prev</a>] [<a 
href="hgbookch6.html#tailhgbookch6.html" >prev-tail</a>] [<a 
href="hgbookch7.html" >front</a>] [<a 
href="hgbook.html#hgbookch7.html" >up</a>] </p></div>
<!--l. 1--><p class="indent" >   <a 
 id="tailhgbookch7.html"></a>   </p> 
</body></html> 
